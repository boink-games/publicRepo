<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<title>Italian Numbers 1–10 Trainer</title>
<meta name="theme-color" content="#0f172a">
<style>
  @import url('https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;800;900&display=swap');
  
  :root{
    --bg1:#0f172a;
    --bg2:#1e293b;
    --accent:#ff7a18;
    --accent2:#ffb86c;
    --card:#0b1220cc;
    --text:#eaf2ff;
    --muted:#8aa0c6;
    --right:#22c55e;
    --wrong:#ef4444;
    --shadow: 0 10px 30px rgba(0,0,0,.35);
  }
  
  *{box-sizing:border-box}
  html,body{height:100%;overflow-x:hidden}
  
  @keyframes gradientFlow {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
  }
  
  @keyframes float {
    0%, 100% { transform: translateY(0) rotate(0deg); }
    33% { transform: translateY(-20px) rotate(1deg); }
    66% { transform: translateY(20px) rotate(-1deg); }
  }
  
  body{
    margin:0;
    font-family: 'Nunito', ui-rounded, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
    color:var(--text);
    background: 
      linear-gradient(135deg, #667eea 0%, #764ba2 15%, #f093fb 30%, #f5576c 45%, #fda085 60%, #fccb90 75%, #d57eeb 90%, #667eea 100%);
    background-size: 400% 400%;
    animation: gradientFlow 20s ease infinite;
    display:grid;
    place-items:center;
    padding: clamp(12px,3vw,24px);
    position: relative;
  }
  
  body::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.3), transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255, 119, 198, 0.3), transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(255, 206, 84, 0.2), transparent 50%);
    pointer-events: none;
    z-index: 0;
  }
  .app{
    width:min(920px, 100%);
    display:grid;
    gap:16px;
    position: relative;
    z-index: 1;
  }
  header{
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:12px;
    flex-wrap:wrap;
  }
  h1{
    margin:0;
    font-size: clamp(22px, 3.5vw, 34px);
    letter-spacing:.2px;
    display:flex;
    align-items:center;
    gap:.5ch;
  }
  .badge{
    font-size:.65em;
    color:#fff;
    background:linear-gradient(135deg, #f093fb, #f5576c);
    padding:.3em .6em;
    border-radius:999px;
    font-weight: 700;
    box-shadow: 0 4px 12px rgba(240, 147, 251, 0.3);
    animation: pulse 2s infinite;
  }
  
  @keyframes pulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.05); }
  }
  .scoreboard{
    display:flex;
    align-items:center;
    gap:10px;
    flex-wrap:wrap;
  }
  .pill{
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(10px);
    border:1px solid rgba(255, 255, 255, 0.2);
    padding:10px 16px;
    border-radius:999px;
    font-weight:700;
    color:#fff;
    display:flex;
    align-items:center;
    gap:8px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.1);
    transition: all 0.3s ease;
  }
  
  .pill:hover {
    transform: translateY(-2px);
    box-shadow: 0 12px 30px rgba(0,0,0,0.15);
  }
  .pill small{color:var(--muted); font-weight:500}
  .btn-reset{
    appearance:none;
    border:none;
    cursor:pointer;
    border-radius:16px;
    padding:12px 20px;
    background:linear-gradient(135deg, #667eea, #764ba2);
    color:#fff;
    font-weight:800;
    letter-spacing:.5px;
    box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
    overflow: hidden;
  }
  
  .btn-reset::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
    transition: left 0.5s;
  }
  
  .btn-reset:hover::before {
    left: 100%;
  }
  
  .btn-reset:hover {
    transform: translateY(-3px);
    box-shadow: 0 12px 35px rgba(102, 126, 234, 0.5);
  }
  
  .btn-reset:active{transform:translateY(0); box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);}
  main{
    display:grid;
    gap:16px;
    grid-template-columns: 1fr;
  }
  .card{
    background: rgba(255, 255, 255, 0.92);
    backdrop-filter: blur(20px);
    border:2px solid rgba(255, 255, 255, 0.5);
    border-radius:30px;
    padding: clamp(20px, 4vw, 35px);
    box-shadow: 
      0 25px 60px rgba(0,0,0,0.15),
      0 10px 25px rgba(0,0,0,0.1),
      inset 0 1px 0 rgba(255,255,255,0.9);
    display:grid;
    gap: clamp(12px, 2.6vw, 24px);
    position: relative;
    overflow: hidden;
    animation: cardFloat 6s ease-in-out infinite;
  }
  
  @keyframes cardFloat {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-10px); }
  }
  
  .card::before {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
    animation: rotate 20s linear infinite;
  }
  
  @keyframes rotate {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
  }
  .number-display{
    text-align:center;
    font-size: clamp(58px, 14vw, 140px);
    font-weight:900;
    letter-spacing:.02em;
    line-height:1;
    background: linear-gradient(135deg, #667eea, #764ba2, #f093fb, #f5576c);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    text-shadow: 2px 2px 10px rgba(0,0,0,0.1);
    padding: clamp(4px, 1vw, 10px) 0;
    animation: textGradient 3s ease infinite;
    position: relative;
    z-index: 1;
  }
  
  @keyframes textGradient {
    0%, 100% { filter: hue-rotate(0deg); }
    50% { filter: hue-rotate(30deg); }
  }
  .subtext{
    text-align:center;
    color:var(--muted);
    margin-top:-8px;
    font-size: clamp(12px, 2.4vw, 14px);
  }
  .options{
    display:grid;
    gap:12px;
    grid-template-columns: 1fr;
  }
  @media (min-width:700px){
    .options{grid-template-columns: repeat(3, 1fr)}
  }
  .option{
    position:relative;
    isolation:isolate;
    appearance:none;
    width:100%;
    border:none;
    cursor:pointer;
    color:#fff;
    font-weight:900;
    letter-spacing:.02em;
    font-size: clamp(18px, 2.6vw, 22px);
    padding: clamp(16px, 3.2vw, 22px);
    border-radius:20px;
    background: linear-gradient(135deg, #f093fb, #f5576c, #fda085);
    box-shadow: 
      0 12px 30px rgba(240, 147, 251, 0.3),
      inset 0 1px 0 rgba(255,255,255,0.4);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    overflow: hidden;
  }
  
  .option::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.3);
    transform: translate(-50%, -50%);
    transition: width 0.6s, height 0.6s;
  }
  
  .option:hover::after {
    width: 300px;
    height: 300px;
  }
  .option:focus-visible{
    outline:2px solid #fff;
    outline-offset:3px;
  }
  .option:hover{filter:brightness(1.03)}
  .option:active{transform:translateY(1px)}
  .option[data-disabled="true"]{
    cursor:not-allowed;
    filter:saturate(.3) brightness(.8);
    opacity:.7;
  }
  .option.kbd-hint::after{
    content: attr(data-kbd);
    position:absolute;
    top:8px; left:10px;
    background:#00000033;
    color:#fff;
    font-weight:800;
    font-size:.75rem;
    padding:.15rem .45rem;
    border-radius:8px;
    letter-spacing:.04em;
  }
  .option.correct{
    background: linear-gradient(135deg, #2ee59d, #20b86b);
    color:#062114;
    box-shadow: 0 10px 30px rgba(20,200,120,.35), inset 0 1px 0 rgba(255,255,255,.35);
    animation: pop .35s ease;
  }
  .option.wrong{
    background: linear-gradient(135deg, #ff7b7b, #ff4d4d);
    color:#2a0101;
    box-shadow: 0 10px 30px rgba(255,77,77,.35), inset 0 1px 0 rgba(255,255,255,.35);
    animation: shake .45s ease both;
  }
  @keyframes pop{
    0%{transform:scale(1)}
    45%{transform:scale(1.06)}
    100%{transform:scale(1)}
  }
  @keyframes shake{
    0%{transform:translateX(0)}
    20%{transform:translateX(-6px)}
    40%{transform:translateX(6px)}
    60%{transform:translateX(-4px)}
    80%{transform:translateX(4px)}
    100%{transform:translateX(0)}
  }
  .feedback{
    min-height:22px;
    text-align:center;
    color:var(--muted);
    font-weight:600;
    letter-spacing:.2px;
  }
  .feedback.good{color:#8af0b4}
  .feedback.bad{color:#ffb3b3}
  .instructions{
    background: linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
    border:1px solid #22304b;
    border-radius:16px;
    padding:14px 16px;
    box-shadow: var(--shadow), inset 0 1px 0 rgba(255,255,255,.04);
  }
  .instructions h2{
    margin:0 0 6px 0;
    font-size: clamp(16px, 2.6vw, 18px);
    color:#e9f1ff;
  }
  .instructions ul{
    margin:6px 0 0 18px;
    padding:0;
    color:#c7d7f7;
    line-height:1.45;
    font-size: clamp(13px, 2.6vw, 15px);
  }
  .foot{
    margin-top:6px;
    font-size:12px;
    color:#90a7cf;
    text-align:center;
  }
</style>
</head>
<body>
<div class="app" role="application" aria-label="Italian Numbers Game">
  <header>
    <h1>Italian Numbers <span class="badge">1–10</span></h1>
    <div class="scoreboard" aria-live="polite">
      <div class="pill"><small>Score</small> <span id="score">0</span></div>
      <div class="pill"><small>Streak</small> <span id="streak">0</span></div>
      <div class="pill"><small>Best</small> <span id="best">0</span></div>
      <button id="resetBtn" class="btn-reset" type="button" aria-label="Reset score and streak">Reset</button>
    </div>
  </header>

  <main>
    <section class="card" aria-labelledby="promptLabel">
      <div id="promptLabel" class="subtext">Pick the correct Italian word for</div>
      <div id="numberDisplay" class="number-display" aria-live="polite">1</div>

      <div class="options" id="options" role="group" aria-label="Answer choices">
        <button class="option kbd-hint" data-kbd="1" data-index="0" type="button" aria-label="Option 1"></button>
        <button class="option kbd-hint" data-kbd="2" data-index="1" type="button" aria-label="Option 2"></button>
        <button class="option kbd-hint" data-kbd="3" data-index="2" type="button" aria-label="Option 3"></button>
      </div>

      <div id="feedback" class="feedback" aria-live="polite"></div>
    </section>

    <section class="instructions" aria-label="How to play">
      <h2>How to play</h2>
      <ul>
        <li>Look at the big number (1–10).</li>
        <li>Tap or click the button with its Italian name.</li>
        <li>Keyboard: press 1, 2, or 3 to choose an answer.</li>
        <li>A new number appears after each correct answer. Try to build a streak!</li>
      </ul>
      <div class="foot">Tip: Wrong answers don't reduce your score—keep trying until you get it right.</div>
    </section>
  </main>
</div>

<script>
(() => {
  const mapping = [
    {n:1, it:'uno'},
    {n:2, it:'due'},
    {n:3, it:'tre'},
    {n:4, it:'quattro'},
    {n:5, it:'cinque'},
    {n:6, it:'sei'},
    {n:7, it:'sette'},
    {n:8, it:'otto'},
    {n:9, it:'nove'},
    {n:10, it:'dieci'}
  ];

  const numberDisplay = document.getElementById('numberDisplay');
  const optionsEl = document.getElementById('options');
  const optionButtons = Array.from(optionsEl.querySelectorAll('.option'));
  const feedbackEl = document.getElementById('feedback');

  const scoreEl = document.getElementById('score');
  const streakEl = document.getElementById('streak');
  const bestEl = document.getElementById('best');
  const resetBtn = document.getElementById('resetBtn');

  let score = 0;
  let streak = 0;
  let best = Number(localStorage.getItem('itnum_best') || 0);
  bestEl.textContent = best;

  let current = null;
  let choices = [];
  let correctIndex = -1;
  let previousNumber = null;
  let lock = false;

  function randInt(min, max) {
    return Math.floor(Math.random() * (max - min + 1)) + min;
  }
  function sampleExcept(total, except) {
    let n;
    do { n = randInt(1, total); } while (n === except);
    return n;
  }
  function shuffle(arr) {
    for (let i = arr.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [arr[i], arr[j]] = [arr[j], arr[i]];
    }
    return arr;
  }

  function setFeedback(text, good=false, bad=false) {
    feedbackEl.textContent = text;
    feedbackEl.classList.toggle('good', good);
    feedbackEl.classList.toggle('bad', bad);
  }

  function vibrate(ms=60){
    if (navigator.vibrate) navigator.vibrate(ms);
  }

  function buildQuestion() {
    lock = false;
    // pick number 1..10 not same as previous
    const n = sampleExcept(10, previousNumber ?? 0);
    previousNumber = n;
    current = mapping.find(m => m.n === n);
    numberDisplay.textContent = n;

    // Build choices: one correct + two unique incorrect
    const others = mapping.filter(m => m.it !== current.it);
    shuffle(others);
    const wrongs = others.slice(0,2).map(m => m.it);

    choices = shuffle([current.it, ...wrongs]);
    correctIndex = choices.indexOf(current.it);

    optionButtons.forEach((btn, idx) => {
      btn.textContent = choices[idx];
      btn.setAttribute('aria-label', `Option ${idx+1}: ${choices[idx]}`);
      btn.dataset.disabled = "false";
      btn.classList.remove('correct','wrong');
    });

    setFeedback('', false, false);
  }

  function disableAll(state = true){
    optionButtons.forEach(btn => btn.dataset.disabled = state ? "true" : "false");
  }

  function handlePick(index, source='mouse') {
    if (lock) return;
    const btn = optionButtons[index];
    if (!btn || btn.dataset.disabled === "true") return;

    const pick = choices[index];
    if (pick === current.it) {
      // correct
      lock = true;
      score += 1;
      streak += 1;
      if (streak > best) {
        best = streak;
        localStorage.setItem('itnum_best', String(best));
      }
      scoreEl.textContent = score;
      streakEl.textContent = streak;
      bestEl.textContent = best;

      btn.classList.add('correct');
      setFeedback(`Correct! ${current.n} = ${current.it}`, true, false);
      disableAll(true);
      setTimeout(buildQuestion, 700);
    } else {
      // wrong
      streak = 0;
      streakEl.textContent = 0;
      btn.classList.add('wrong');
      btn.dataset.disabled = "true";
      setFeedback(`Not quite. Try again!`, false, true);
      vibrate(60);
      // keep other options enabled
    }
  }

  // Event listeners: buttons
  optionButtons.forEach((btn, idx) => {
    btn.addEventListener('click', () => handlePick(idx));
    btn.addEventListener('pointerdown', () => btn.style.transform = 'translateY(1px)');
    btn.addEventListener('pointerup', () => btn.style.transform = '');
    btn.addEventListener('pointercancel', () => btn.style.transform = '');
    btn.addEventListener('blur', () => btn.style.transform = '');
  });

  // Keyboard controls: 1/2/3
  window.addEventListener('keydown', (e) => {
    if (e.repeat) return;
    const key = e.key;
    if (key === '1' || key === '2' || key === '3') {
      const idx = Number(key) - 1;
      handlePick(idx, 'keyboard');
      // Brief visual flash
      const btn = optionButtons[idx];
      if (btn) {
        btn.animate([{filter:'brightness(1.15)'},{filter:'brightness(1)'}], {duration:180});
      }
    }
  });

  resetBtn.addEventListener('click', () => {
    score = 0;
    streak = 0;
    scoreEl.textContent = 0;
    streakEl.textContent = 0;
    setFeedback('Score and streak reset.');
    // Keep current question; re-enable any disabled wrong choices
    optionButtons.forEach(btn => {
      btn.dataset.disabled = "false";
      btn.classList.remove('correct','wrong');
    });
  });

  // First question
  buildQuestion();

  // Reduce keyboard hints on touch-only devices
  const hasTouch = matchMedia('(pointer:coarse)').matches;
  if (hasTouch) {
    optionButtons.forEach(btn => btn.classList.remove('kbd-hint'));
  }
})();
</script>
</body>
</html>