<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#7ec8ff" />
  <title>Rock ‚Ä¢ Paper ‚Ä¢ Scissors</title>
  <style>
    :root{
      --bg1:#a1c4fd;
      --bg2:#c2e9fb;
      --card:#ffffffee;
      --ink:#2a2a2a;
      --muted:#5a6b7a;
      --win:#34c759;
      --lose:#ff3b30;
      --draw:#ffcc00;
      --shadow: 0 10px 25px rgba(0,0,0,.15);
      --radius: 20px;
      --speed: .25s;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Noto Sans, Ubuntu, Cantarell, Arial, sans-serif;
      color:var(--ink);
      background: linear-gradient(160deg,var(--bg1),var(--bg2));
      display:flex; align-items:center; justify-content:center;
      overflow:hidden;
    }
    .sky{
      position:fixed; inset:0; pointer-events:none; overflow:hidden;
    }
    .bubble{
      position:absolute; border-radius:50%;
      background: radial-gradient(circle at 30% 30%, rgba(255,255,255,.8), rgba(255,255,255,.15) 60%, rgba(255,255,255,0) 70%);
      filter: blur(.3px);
      animation: float 16s linear infinite;
      opacity:.5;
    }
    .bubble.b1{ width:120px; height:120px; left:5%; bottom:-140px; animation-duration: 22s; animation-delay: 0s;}
    .bubble.b2{ width:80px; height:80px; left:30%; bottom:-120px; animation-duration: 18s; animation-delay: 2s;}
    .bubble.b3{ width:150px; height:150px; right:10%; bottom:-180px; animation-duration: 25s; animation-delay: 5s;}
    .bubble.b4{ width:60px; height:60px; right:35%; bottom:-100px; animation-duration: 14s; animation-delay: 3s;}
    @keyframes float{
      0% { transform: translateY(0) translateX(0) scale(1); opacity:.05}
      10% { opacity:.35}
      50% { transform: translateY(-50vh) translateX(10px) scale(1.05)}
      100%{ transform: translateY(-100vh) translateX(-10px) scale(1.1); opacity:0}
    }

    .game{
      width:min(92vw, 780px);
      background:var(--card);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: clamp(16px, 3vw, 28px);
      backdrop-filter: blur(6px);
      position:relative;
    }
    .title{
      text-align:center;
      margin:0 0 8px 0;
      font-size: clamp(22px, 5.8vw, 38px);
      line-height:1.1;
      background: linear-gradient(90deg,#007aff,#ff2d55,#34c759);
      -webkit-background-clip:text;
      background-clip:text;
      color:transparent;
      font-weight:800;
      letter-spacing:.5px;
    }
    .subtitle{
      text-align:center; margin:0 0 16px 0; color:var(--muted);
      font-size: clamp(13px, 3.5vw, 18px);
    }

    .scoreboard{
      display:grid; grid-template-columns: 1fr auto 1fr; align-items:center; gap:8px;
      background:#ffffffcc; border-radius:14px; padding:10px 12px; margin: 6px 0 14px 0;
    }
    .score{
      display:flex; align-items:center; gap:8px; justify-content:center;
      font-size: clamp(16px, 4.3vw, 22px);
    }
    .score .who{font-weight:700}
    .score .num{
      min-width:2ch; text-align:center; background:#f1f5f9; padding:4px 10px; border-radius:999px;
      box-shadow: inset 0 1px 2px rgba(0,0,0,.05);
    }
    .divider{
      color:#9aa6b2; font-weight:700; font-size: clamp(12px, 3.2vw, 16px);
    }

    .arena{
      display:grid;
      grid-template-columns: 1fr auto 1fr;
      align-items:center;
      gap: clamp(8px, 2.6vw, 18px);
      margin: 6px 0 16px 0;
    }
    .player, .bot{
      display:flex; flex-direction:column; align-items:center; gap:6px;
    }
    .avatar{
      font-size: clamp(26px, 8vw, 42px);
      background:#f1f5f9; padding:6px 12px; border-radius:999px;
      box-shadow: inset 0 1px 2px rgba(0,0,0,.05);
    }
    .pick{
      font-size: clamp(36px, 12vw, 64px);
      width: clamp(70px, 22vw, 110px);
      height: clamp(70px, 22vw, 110px);
      display:grid; place-items:center;
      background:#ffffff;
      border-radius: 18px;
      box-shadow: 0 8px 18px rgba(0,0,0,.08);
      transition: transform var(--speed);
    }
    .vs{
      font-weight:800; color:#9aa6b2; font-size: clamp(12px, 3.5vw, 16px);
      background:#f8fafc; padding:6px 10px; border-radius:999px;
    }
    .thinking{
      animation: wiggle .6s ease-in-out infinite;
      opacity:.8;
    }
    @keyframes wiggle {
      0%,100%{ transform: translateY(0)}
      50%{ transform: translateY(-4px)}
    }

    .result{
      display:flex; align-items:center; justify-content:center; gap:10px;
      background:#f6f7fb; border-radius:14px; padding:10px 12px;
      font-size: clamp(16px, 4.6vw, 22px); font-weight:700; color:#333;
      min-height: 44px;
    }
    .badge{
      display:inline-flex; align-items:center; justify-content:center;
      width:28px; height:28px; border-radius:50%;
      font-size: 18px; box-shadow: 0 4px 10px rgba(0,0,0,.08);
    }
    .badge.win{ background:#eaffee; color:#0a7a2a}
    .badge.lose{ background:#ffecec; color:#a31212}
    .badge.draw{ background:#fff9db; color:#a07100}

    .choices{
      margin-top: 14px;
      display:grid; grid-template-columns: repeat(3, 1fr);
      gap: clamp(8px, 2.8vw, 16px);
    }
    .choice-btn{
      appearance:none; border:none; outline:none; cursor:pointer;
      width:100%; aspect-ratio: 1 / 1; border-radius: 22px;
      display:flex; flex-direction:column; align-items:center; justify-content:center; gap:6px;
      font-weight:800;
      box-shadow: 0 10px 18px rgba(0,0,0,.12);
      transition: transform .12s ease, box-shadow .12s ease, filter .2s ease;
      color:#113;
      user-select:none; -webkit-tap-highlight-color: transparent;
    }
    .choice-btn:active{ transform: translateY(2px) scale(.98)}
    .choice-btn .icon{ font-size: clamp(36px, 12vw, 56px) }
    .choice-btn .label{ font-size: clamp(14px, 4vw, 18px); text-shadow: 0 1px 0 rgba(255,255,255,.6)}
    .choice-btn.rock{ background: linear-gradient(180deg,#ffd3c7,#ff8a65)}
    .choice-btn.paper{ background: linear-gradient(180deg,#d1efff,#4fc3f7)}
    .choice-btn.scissors{ background: linear-gradient(180deg,#d9f6df,#81c784)}
    .choice-btn:hover{ box-shadow: 0 14px 26px rgba(0,0,0,.16)}
    @media (hover:none){
      .choice-btn:hover{ box-shadow: 0 10px 18px rgba(0,0,0,.12) }
    }

    .footer{
      display:flex; gap:10px; justify-content:center; align-items:center;
      margin-top: 14px;
    }
    .soft{
      background:#eef2f7; border:none; border-radius:999px; padding:10px 14px; cursor:pointer;
      font-weight:700; color:#2c3e50; box-shadow: inset 0 -1px 0 rgba(0,0,0,.04), 0 4px 10px rgba(0,0,0,.08);
      transition: transform .12s ease, box-shadow .12s ease;
      -webkit-tap-highlight-color: transparent;
    }
    .soft:active{ transform: translateY(1px) }
    .soft .mini{ font-size:18px; margin-right:8px }

    .pulse{ animation: pulse .6s ease }
    @keyframes pulse{
      0%{ transform: scale(1) }
      50%{ transform: scale(1.08) }
      100%{ transform: scale(1) }
    }
    .win-glow{ box-shadow: 0 0 0 6px rgba(52,199,89,.15), 0 10px 18px rgba(0,0,0,.12) !important }
    .lose-shake{ animation: shake .35s ease }
    @keyframes shake{
      0%,100%{ transform: translateX(0) }
      25%{ transform: translateX(-4px) }
      75%{ transform: translateX(4px) }
    }

    @media (prefers-reduced-motion: reduce){
      .bubble{ display:none }
      .thinking, .pulse, .lose-shake{ animation:none }
      .choice-btn, .pick{ transition: none }
    }
  </style>
</head>
<body>
  <div class="sky" aria-hidden="true">
    <div class="bubble b1"></div>
    <div class="bubble b2"></div>
    <div class="bubble b3"></div>
    <div class="bubble b4"></div>
  </div>

  <main class="game" role="application" aria-label="Rock Paper Scissors game">
    <h1 class="title">Rock ‚Ä¢ Paper ‚Ä¢ Scissors</h1>
    <p class="subtitle">Tap a picture to play!</p>

    <section class="scoreboard" aria-label="Scoreboard">
      <div class="score" aria-live="polite">
        <span class="who">üôÇ You</span>
        <span class="num" id="youScore">0</span>
      </div>
      <div class="divider">Draws: <span id="draws">0</span></div>
      <div class="score" aria-live="polite">
        <span class="who">ü§ñ Robot</span>
        <span class="num" id="botScore">0</span>
      </div>
    </section>

    <section class="arena" aria-label="Choices shown">
      <div class="player">
        <div class="avatar" aria-hidden="true">üôÇ</div>
        <div class="pick" id="youPick" aria-live="polite" aria-label="Your choice">?</div>
      </div>
      <div class="vs">VS</div>
      <div class="bot">
        <div class="avatar" id="robotFace" aria-hidden="true">ü§ñ</div>
        <div class="pick" id="botPick" aria-live="polite" aria-label="Robot choice">?</div>
      </div>
    </section>

    <div class="result" id="result" aria-live="polite" role="status">
      Make your move!
    </div>

    <section class="choices" aria-label="Make a choice">
      <button class="choice-btn rock" data-choice="rock" aria-label="Rock">
        <div class="icon">‚úä</div>
        <div class="label">Rock</div>
      </button>
      <button class="choice-btn paper" data-choice="paper" aria-label="Paper">
        <div class="icon">‚úã</div>
        <div class="label">Paper</div>
      </button>
      <button class="choice-btn scissors" data-choice="scissors" aria-label="Scissors">
        <div class="icon">‚úåÔ∏è</div>
        <div class="label">Scissors</div>
      </button>
    </section>

    <div class="footer">
      <button class="soft" id="resetBtn" aria-label="Reset score"><span class="mini">üîÑ</span>Reset</button>
      <button class="soft" id="helpBtn" aria-label="How to play"><span class="mini">‚ùì</span>Help</button>
    </div>
  </main>

  <script>
    (function(){
      const youPick = document.getElementById('youPick');
      const botPick = document.getElementById('botPick');
      const resultBox = document.getElementById('result');
      const robotFace = document.getElementById('robotFace');
      const youScoreEl = document.getElementById('youScore');
      const botScoreEl = document.getElementById('botScore');
      const drawsEl = document.getElementById('draws');
      const resetBtn = document.getElementById('resetBtn');
      const helpBtn = document.getElementById('helpBtn');
      const buttons = Array.from(document.querySelectorAll('.choice-btn'));

      const CHOICES = {
        rock:     { icon:'‚úä', label:'Rock'     },
        paper:    { icon:'‚úã', label:'Paper'    },
        scissors: { icon:'‚úåÔ∏è', label:'Scissors' }
      };
      const order = ['rock','paper','scissors'];

      let score = loadScore();

      let busy = false;
      updateScoreboard();

      buttons.forEach(btn=>{
        btn.addEventListener('click', ()=> handlePlay(btn.dataset.choice));
        btn.addEventListener('touchstart', ()=> btn.classList.add('pulse'), {passive:true});
        btn.addEventListener('touchend', ()=> btn.classList.remove('pulse'));
      });

      resetBtn.addEventListener('click', resetScore);
      helpBtn.addEventListener('click', showHelp);

      document.addEventListener('keydown', (e)=>{
        const k = e.key.toLowerCase();
        if(['r','p','s'].includes(k)){
          e.preventDefault();
          const map = {r:'rock', p:'paper', s:'scissors'};
          handlePlay(map[k]);
        }
      });

      function handlePlay(user){
        if(busy) return;
        busy = true;

        const bot = pickBot();
        showThinking();

        // Show your pick immediately
        youPick.textContent = CHOICES[user].icon;
        youPick.classList.remove('lose-shake','win-glow');
        youPick.classList.add('pulse');

        setTimeout(()=>{
          // Reveal bot pick
          botPick.textContent = CHOICES[bot].icon;
          botPick.classList.remove('lose-shake','win-glow');
          botPick.classList.add('pulse');

          const outcome = judge(user, bot);
          applyOutcome(outcome, user, bot);
          busy = false;
        }, 450);
      }

      function pickBot(){
        // Simple random for fairness
        const idx = Math.floor(Math.random() * order.length);
        return order[idx];
      }

      function judge(a,b){
        if(a===b) return 'draw';
        if((a==='rock' && b==='scissors') ||
           (a==='paper' && b==='rock') ||
           (a==='scissors' && b==='paper')) return 'win';
        return 'lose';
      }

      function applyOutcome(outcome, user, bot){
        clearClasses(youPick, botPick);

        if(outcome==='win'){
          score.you++;
          flairWin();
          youPick.classList.add('win-glow');
          announce('You win! üåü');
          beepWin();
          vibrate([25,40,25]);
        }else if(outcome==='lose'){
          score.bot++;
          flairLose();
          botPick.classList.add('win-glow');
          announce('Robot wins! üòÑ');
          beepLose();
          vibrate([60]);
        }else{
          score.draws++;
          flairDraw();
          announce("It's a draw! ü§ù");
          beepDraw();
          vibrate([25]);
        }

        saveScore();
        updateScoreboard();
      }

      function announce(text){
        resultBox.innerHTML = '';
        const badge = document.createElement('span');
        badge.className = 'badge ' + (text.includes('win') && !text.includes('Robot') ? 'win' : text.includes('Robot') ? 'lose' : 'draw');
        badge.textContent = text.includes('draw') ? 'ü§ù' : text.includes('Robot') ? 'ü§ñ' : 'üåü';
        const msg = document.createElement('span');
        msg.textContent = text;
        resultBox.appendChild(badge);
        resultBox.appendChild(msg);
      }

      function showThinking(){
        botPick.textContent = '?';
        robotFace.classList.add('thinking');
        setTimeout(()=> robotFace.classList.remove('thinking'), 500);
      }

      function clearClasses(...els){
        els.forEach(el => el.classList.remove('pulse','lose-shake','win-glow'));
      }

      function updateScoreboard(){
        youScoreEl.textContent = score.you;
        botScoreEl.textContent = score.bot;
        drawsEl.textContent = score.draws;
      }

      function resetScore(){
        score = {you:0, bot:0, draws:0};
        saveScore();
        updateScoreboard();
        youPick.textContent = '?';
        botPick.textContent = '?';
        resultBox.textContent = 'Make your move!';
        clearClasses(youPick, botPick);
        vibrate([10]);
      }

      function showHelp(){
        const lines = [
          'How to play:',
          'Rock beats Scissors.',
          'Paper beats Rock.',
          'Scissors beat Paper.',
          '',
          'Tap a picture and see who wins!'
        ];
        alert(lines.join('\n'));
      }

      function saveScore(){
        try { localStorage.setItem('rpsScore', JSON.stringify(score)); } catch(_){}
      }
      function loadScore(){
        try {
          const s = JSON.parse(localStorage.getItem('rpsScore'));
          if(s && 'you'in s && 'bot'in s && 'draws'in s) return s;
        } catch(_){}
        return {you:0, bot:0, draws:0};
      }

      function vibrate(pattern){
        if(navigator.vibrate) navigator.vibrate(pattern);
      }

      // Simple beeper for feedback
      let audioCtx;
      function ensureAudio(){
        if(!audioCtx) {
          try { audioCtx = new (window.AudioContext || window.webkitAudioContext)(); } catch(_){}
        }
        return audioCtx;
      }
      function tone(freq=440, dur=120, type='sine', gain=0.04, when=0){
        const ctx = ensureAudio(); if(!ctx) return;
        const o = ctx.createOscillator();
        const g = ctx.createGain();
        o.type = type; o.frequency.value = freq;
        g.gain.value = gain;
        o.connect(g).connect(ctx.destination);
        const t = ctx.currentTime + when/1000;
        o.start(t);
        o.stop(t + dur/1000);
      }
      function beepWin(){
        tone(700,110,'triangle',0.05,0);
        tone(900,110,'triangle',0.05,90);
      }
      function beepLose(){
        tone(300,160,'sawtooth',0.045,0);
        tone(220,140,'sawtooth',0.04,120);
      }
      function beepDraw(){
        tone(520,140,'square',0.04,0);
      }

      function flairWin(){
        resultBox.classList.remove('lose-shake');
        resultBox.classList.add('pulse');
        setTimeout(()=> resultBox.classList.remove('pulse'), 400);
      }
      function flairLose(){
        resultBox.classList.add('lose-shake');
        setTimeout(()=> resultBox.classList.remove('lose-shake'), 360);
      }
      function flairDraw(){
        resultBox.classList.add('pulse');
        setTimeout(()=> resultBox.classList.remove('pulse'), 400);
      }

      // Prevent double-tap zoom on iOS for buttons
      let lastTouch = 0;
      document.addEventListener('touchend', (e)=>{
        const now = Date.now();
        if(now - lastTouch <= 300) e.preventDefault();
        lastTouch = now;
      }, {passive:false});
    })();
  </script>
</body>
</html>