<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Animale Românești - Adventure Game</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Fredoka:wght@400;500;600;700&display=swap');
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    html, body { height: 100%; }
    body {
      min-height: 100vh;
      font-family: 'Fredoka', sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 25%, #f093fb 50%, #f5576c 75%, #fda085 100%);
      background-size: 400% 400%;
      animation: gradientShift 15s ease infinite;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 16px;
      position: relative;
      overflow: hidden;
    }
    
    @keyframes gradientShift {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
    
    .environment-bg {
      position: absolute;
      width: 100%;
      height: 100%;
      pointer-events: none;
      opacity: 0.3;
    }
    
    .cloud {
      position: absolute;
      background: white;
      border-radius: 100px;
      opacity: 0.4;
      animation: floatCloud 20s infinite;
    }
    
    @keyframes floatCloud {
      from { transform: translateX(-100px); }
      to { transform: translateX(calc(100vw + 100px)); }
    }
    
    .game-container {
      max-width: 640px;
      width: 100%;
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(20px);
      border-radius: 28px;
      padding: 20px 16px;
      box-shadow: 0 30px 60px rgba(0, 0, 0, 0.2);
      position: relative;
      z-index: 1;
      max-height: calc(100vh - 24px);
      overflow: auto;
    }
    
    .game-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      flex-wrap: wrap;
      gap: 10px;
    }
    
    .level-indicator {
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: white;
      padding: 8px 16px;
      border-radius: 20px;
      font-weight: 600;
      font-size: 16px;
    }
    
    .coins {
      display: flex;
      align-items: center;
      gap: 5px;
      background: linear-gradient(135deg, #ffd700, #ffed4e);
      padding: 8px 16px;
      border-radius: 20px;
      font-weight: 700;
      font-size: 18px;
      color: #333;
    }
    
    .lives {
      display: flex;
      gap: 5px;
      font-size: 24px;
    }
    
    .title {
      text-align: center;
      margin-bottom: 20px;
    }
    
    .title h1 {
      font-size: 28px;
      background: linear-gradient(135deg, #667eea, #764ba2);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    
    .game-modes {
      display: flex;
      gap: 10px;
      justify-content: center;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }
    
    .mode-btn {
      background: white;
      border: 2px solid #667eea;
      padding: 10px 20px;
      border-radius: 20px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 14px;
    }
    
    .mode-btn.active {
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: white;
    }
    
    .mode-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0,0,0,0.2);
    }
    
    .habitat-selector {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }
    
    .habitat-btn {
      background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1));
      border: 2px solid transparent;
      padding: 8px 16px;
      border-radius: 15px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 20px;
    }
    
    .habitat-btn.active {
      border-color: #667eea;
      background: linear-gradient(135deg, rgba(102, 126, 234, 0.3), rgba(118, 75, 162, 0.3));
    }
    
    .animal-stage {
      background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(240, 147, 251, 0.1));
      border-radius: 25px;
      padding: 30px;
      margin-bottom: 20px;
      position: relative;
      min-height: 300px;
    }
    
    .animal-display {
      text-align: center;
      position: relative;
    }
    
    .animal-emoji {
      font-size: 120px;
      animation: animalBounce 2s ease-in-out infinite;
      cursor: pointer;
      user-select: none;
      display: inline-block;
      position: relative;
    }
    
    @keyframes animalBounce {
      0%, 100% { transform: translateY(0) scale(1); }
      50% { transform: translateY(-10px) scale(1.05); }
    }
    
    .animal-info {
      margin-top: 20px;
    }
    
    .animal-name {
      font-size: 36px;
      font-weight: 700;
      color: #333;
      margin-bottom: 5px;
    }
    
    .pronunciation {
      color: #666;
      font-size: 18px;
      font-style: italic;
      margin-bottom: 10px;
    }
    
    .animal-facts {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-top: 15px;
      flex-wrap: wrap;
    }
    
    .fact-badge {
      background: white;
      padding: 5px 12px;
      border-radius: 15px;
      font-size: 14px;
      display: flex;
      align-items: center;
      gap: 5px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    
    .sound-controls {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin-top: 15px;
    }
    
    .sound-btn {
      background: linear-gradient(135deg, #f093fb, #f5576c);
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 50px;
      font-size: 16px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-weight: 600;
    }
    
    .sound-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(240, 147, 251, 0.4);
    }
    
    .challenge-area {
      margin-top: 20px;
    }
    
    .challenge-type {
      text-align: center;
      font-size: 18px;
      color: #666;
      margin-bottom: 15px;
      font-weight: 600;
    }
    
    .options {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 12px;
    }
    
    .option-btn {
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: white;
      border: none;
      padding: 15px;
      border-radius: 20px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }
    
    .option-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
    }
    
    .option-btn.correct {
      background: linear-gradient(135deg, #11998e, #38ef7d);
      animation: correctPulse 0.6s ease;
    }
    
    .option-btn.wrong {
      background: linear-gradient(135deg, #ee0979, #ff6a00);
      animation: shake 0.5s ease;
    }
    
    @keyframes correctPulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.05); }
      100% { transform: scale(1); }
    }
    
    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-10px); }
      75% { transform: translateX(10px); }
    }
    
    .memory-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin-top: 16px; }
    
    .memory-card { aspect-ratio: 1; background: linear-gradient(135deg, #667eea, #764ba2); border-radius: 14px; display: flex; align-items: center; justify-content: center; font-size: 34px; cursor: pointer; transition: all 0.3s ease; position: relative; }
    
    .memory-card.flipped {
      background: white;
      transform: rotateY(180deg);
    }
    
    .memory-card.matched {
      background: linear-gradient(135deg, #11998e, #38ef7d);
      animation: correctPulse 0.6s ease;
    }
    
    .progress-section {
      margin-top: 20px;
    }
    
    .xp-bar {
      height: 20px;
      background: rgba(0, 0, 0, 0.1);
      border-radius: 50px;
      overflow: hidden;
      position: relative;
    }
    
    .xp-fill {
      height: 100%;
      background: linear-gradient(90deg, #f093fb, #f5576c, #fda085);
      border-radius: 50px;
      width: 0%;
      transition: width 0.8s ease;
      position: relative;
      overflow: hidden;
    }
    
    .xp-fill::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
      animation: shimmer 2s infinite;
    }
    
    @keyframes shimmer {
      from { transform: translateX(-100%); }
      to { transform: translateX(100%); }
    }
    
    .xp-text {
      text-align: center;
      margin-top: 5px;
      font-size: 14px;
      color: #666;
    }
    
    .achievements {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin-top: 15px;
      flex-wrap: wrap;
    }
    
    .achievement {
      width: 50px;
      height: 50px;
      background: rgba(0, 0, 0, 0.1);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      position: relative;
      transition: all 0.3s ease;
    }
    
    .achievement.unlocked {
      background: linear-gradient(135deg, #ffd700, #ffed4e);
      animation: achievementUnlock 0.6s ease;
    }
    
    @keyframes achievementUnlock {
      0% { transform: scale(0) rotate(0deg); }
      50% { transform: scale(1.2) rotate(180deg); }
      100% { transform: scale(1) rotate(360deg); }
    }
    
    .zoo-collection { display: grid; grid-template-columns: repeat(auto-fill, minmax(60px, 1fr)); gap: 10px; margin-top: 16px; padding: 12px; background: rgba(0, 0, 0, 0.05); border-radius: 18px; }
    
    .zoo-animal { background: white; border-radius: 10px; padding: 8px; text-align: center; font-size: 28px; position: relative; cursor: pointer; transition: all 0.3s ease; }
    
    .zoo-animal:hover {
      transform: scale(1.1);
      box-shadow: 0 5px 15px rgba(0,0,0,0.2);
    }
    
    .zoo-animal.locked {
      background: rgba(0, 0, 0, 0.1);
      filter: grayscale(1);
      opacity: 0.5;
    }
    
    .combo-indicator { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 36px; font-weight: 800; color: #ff6b6b; opacity: 0; pointer-events: none; z-index: 1000; }
    
    .combo-indicator.show {
      animation: comboFlash 1s ease;
    }
    
    @keyframes comboFlash {
      0% { opacity: 0; transform: translate(-50%, -50%) scale(0.5); }
      50% { opacity: 1; transform: translate(-50%, -50%) scale(1.5); }
      100% { opacity: 0; transform: translate(-50%, -50%) scale(1); }
    }
    
    .daily-challenge { background: linear-gradient(135deg, #ffd700, #ffed4e); padding: 12px; border-radius: 16px; margin-bottom: 14px; text-align: center; }
    
    .daily-challenge h3 {
      color: #333;
      margin-bottom: 10px;
    }
    
    .daily-challenge p {
      color: #666;
      font-size: 14px;
    }
    
    .leaderboard { background: rgba(0, 0, 0, 0.05); padding: 12px; border-radius: 14px; margin-top: 14px; }
    
    .leaderboard h3 {
      text-align: center;
      margin-bottom: 10px;
      color: #333;
    }
    
    .leaderboard-entry { display: flex; justify-content: space-between; padding: 6px 8px; background: white; border-radius: 10px; margin-bottom: 6px; font-size: 13px; }
    
    .tooltip {
      position: absolute;
      background: #333;
      color: white;
      padding: 8px 12px;
      border-radius: 10px;
      font-size: 14px;
      pointer-events: none;
      opacity: 0;
      transition: opacity 0.3s ease;
      z-index: 100;
    }
    
    .tooltip.show { opacity: 1; }

    @media (max-width: 480px) {
      .animal-emoji { font-size: 80px; }
      .animal-name { font-size: 24px; }
      .sound-btn { font-size: 13px; padding: 8px 14px; }
      .memory-grid { grid-template-columns: repeat(3, 1fr); }
    }
    @media (max-width: 360px) {
      .options { grid-template-columns: 1fr; }
      .memory-grid { grid-template-columns: repeat(2, 1fr); }
    }
  </style>
</head>
<body>
  <div class="environment-bg">
    <div class="cloud" style="width: 100px; height: 40px; top: 10%; animation-delay: 0s;"></div>
    <div class="cloud" style="width: 120px; height: 50px; top: 20%; animation-delay: 5s;"></div>
    <div class="cloud" style="width: 80px; height: 35px; top: 30%; animation-delay: 10s;"></div>
  </div>
  
  <div class="game-container">
    <div class="game-header">
      <div class="level-indicator">Nivel <span id="level">1</span></div>
      <div class="coins">🪙 <span id="coins">0</span></div>
      <div class="lives" id="lives">❤️❤️❤️</div>
    </div>
    
    <div class="title">
      <h1>🐾 Aventura Animalelor 🐾</h1>
    </div>
    
    <div class="daily-challenge">
      <h3>🎯 Provocarea Zilei</h3>
      <p>Găsește 5 animale din pădure pentru a câștiga 50 monede bonus!</p>
    </div>
    
    <div class="game-modes">
      <button class="mode-btn active" onclick="setGameMode('learn')">📚 Învață</button>
      <button class="mode-btn" onclick="setGameMode('quiz')">❓ Test</button>
      <button class="mode-btn" onclick="setGameMode('memory')">🧠 Memorie</button>
      <button class="mode-btn" onclick="setGameMode('sounds')">🔊 Sunete</button>
      <button class="mode-btn" onclick="setGameMode('zoo')">🦁 Grădina Zoo</button>
    </div>
    
    <div class="habitat-selector">
      <button class="habitat-btn active" onclick="selectHabitat('all')">🌍 Toate</button>
      <button class="habitat-btn" onclick="selectHabitat('farm')">🚜 Fermă</button>
      <button class="habitat-btn" onclick="selectHabitat('forest')">🌲 Pădure</button>
      <button class="habitat-btn" onclick="selectHabitat('water')">💧 Apă</button>
      <button class="habitat-btn" onclick="selectHabitat('safari')">🦁 Safari</button>
      <button class="habitat-btn" onclick="selectHabitat('pet')">🏠 Acasă</button>
    </div>
    
    <div class="animal-stage">
      <div class="animal-display" id="animalDisplay">
        <div class="animal-emoji" id="animalEmoji">🐶</div>
        <div class="animal-info">
          <div class="animal-name" id="animalName">Câine</div>
          <div class="pronunciation" id="pronunciation">[kɨ-ne]</div>
          <div class="animal-facts">
            <div class="fact-badge">🏠 Animal de companie</div>
            <div class="fact-badge">🔊 Ham-Ham</div>
            <div class="fact-badge">🦴 Iubește oasele</div>
          </div>
        </div>
        <div class="sound-controls">
          <button class="sound-btn" onclick="playAnimalName()">🔊 Numele</button>
          <button class="sound-btn" onclick="playAnimalSound()">🎵 Sunetul</button>
          <button class="sound-btn" onclick="playDescription()">📖 Descriere</button>
        </div>
      </div>
    </div>
    
    <div class="challenge-area">
      <div class="challenge-type" id="challengeType">Ce animal este acesta?</div>
      <div class="options" id="options">
        <button class="option-btn" onclick="checkAnswer(this)">Dog</button>
        <button class="option-btn" onclick="checkAnswer(this)">Cat</button>
        <button class="option-btn" onclick="checkAnswer(this)">Bird</button>
        <button class="option-btn" onclick="checkAnswer(this)">Fish</button>
      </div>
    </div>
    
    <div class="progress-section">
      <div class="xp-bar">
        <div class="xp-fill" id="xpBar"></div>
      </div>
      <div class="xp-text">XP: <span id="xp">0</span> / <span id="xpNeeded">100</span></div>
    </div>
    
    <div class="achievements">
      <div class="achievement" title="Primul animal învățat">🥇</div>
      <div class="achievement" title="10 animale învățate">🏆</div>
      <div class="achievement" title="Toate animalele de la fermă">🚜</div>
      <div class="achievement" title="Expert în sunete">🔊</div>
      <div class="achievement" title="Maestru al memoriei">🧠</div>
    </div>
    
    <div class="leaderboard">
      <h3>🏅 Top Jucători</h3>
      <div class="leaderboard-entry">
        <span>1. Tu</span>
        <span>⭐ <span id="playerScore">0</span></span>
      </div>
      <div class="leaderboard-entry">
        <span>2. Mihai</span>
        <span>⭐ 850</span>
      </div>
      <div class="leaderboard-entry">
        <span>3. Ana</span>
        <span>⭐ 720</span>
      </div>
    </div>
  </div>
  
  <div class="combo-indicator" id="comboIndicator">COMBO x3!</div>
  <div class="tooltip" id="tooltip"></div>
  
  <script>
    const animals = {
      farm: [
        { emoji: '🐶', ro: 'Câine', en: 'Dog', sound: 'kɨ-ne', animalSound: 'Ham-Ham', facts: ['Animal de companie', 'Prieten loial', 'Paznic bun'], description: 'Câinele este cel mai bun prieten al omului' },
        { emoji: '🐱', ro: 'Pisică', en: 'Cat', sound: 'pi-si-kə', animalSound: 'Miau', facts: ['Animal de companie', 'Vânător de șoareci', 'Doarme mult'], description: 'Pisica este un animal independent și jucăuș' },
        { emoji: '🐮', ro: 'Vacă', en: 'Cow', sound: 'va-kə', animalSound: 'Muuu', facts: ['Dă lapte', 'Animal de fermă', 'Mănâncă iarbă'], description: 'Vaca ne dă lapte și produse lactate' },
        { emoji: '🐷', ro: 'Porc', en: 'Pig', sound: 'pork', animalSound: 'Groh-Groh', facts: ['Animal de fermă', 'Roz și rotund', 'Inteligent'], description: 'Porcul este un animal foarte inteligent' },
        { emoji: '🐔', ro: 'Găină', en: 'Chicken', sound: 'gə-i-nə', animalSound: 'Cotcodac', facts: ['Face ouă', 'Ciugulește boabe', 'Se trezește devreme'], description: 'Găina ne dă ouă proaspete în fiecare zi' },
        { emoji: '🐴', ro: 'Cal', en: 'Horse', sound: 'kal', animalSound: 'Nihaha', facts: ['Animal rapid', 'Pentru călărie', 'Mănâncă ovăz'], description: 'Calul este un animal nobil și puternic' },
        { emoji: '🐑', ro: 'Oaie', en: 'Sheep', sound: 'wa-ye', animalSound: 'Beee', facts: ['Dă lână', 'Trăiește în turmă', 'Blândă'], description: 'Oaia ne dă lână caldă pentru haine' },
        { emoji: '🦆', ro: 'Rață', en: 'Duck', sound: 'ra-tsə', animalSound: 'Mac-Mac', facts: ['Înoată pe apă', 'Are pene', 'Mănâncă pâine'], description: 'Rața înoată pe lac și zboară' }
      ],
      forest: [
        { emoji: '🐻', ro: 'Urs', en: 'Bear', sound: 'urs', animalSound: 'Morrr', facts: ['Animal mare', 'Hibernează iarna', 'Mănâncă miere'], description: 'Ursul este cel mai mare animal din pădurile noastre' },
        { emoji: '🦊', ro: 'Vulpe', en: 'Fox', sound: 'vul-pe', animalSound: 'Yip-Yip', facts: ['Șireată', 'Coada stufoasă', 'Vânează noaptea'], description: 'Vulpea este cunoscută pentru inteligența sa' },
        { emoji: '🐰', ro: 'Iepure', en: 'Rabbit', sound: 'ye-pu-re', animalSound: 'Țup-Țup', facts: ['Sare mult', 'Urechi lungi', 'Mănâncă morcovi'], description: 'Iepurele sare prin pădure cu urechi mari' },
        { emoji: '🦌', ro: 'Cerb', en: 'Deer', sound: 'cherb', animalSound: 'Bram', facts: ['Coarne mari', 'Elegant', 'Fuge repede'], description: 'Cerbul este regele pădurii cu coarne impunătoare' },
        { emoji: '🐺', ro: 'Lup', en: 'Wolf', sound: 'lup', animalSound: 'Auuuu', facts: ['Trăiește în haită', 'Vânător nocturn', 'Strămoșul câinelui'], description: 'Lupul urlă la lună și trăiește în haită' },
        { emoji: '🦫', ro: 'Castor', en: 'Beaver', sound: 'kas-tor', animalSound: 'Plesc', facts: ['Construiește baraje', 'Coada lată', 'Roade lemn'], description: 'Castorul construiește baraje pe râuri' },
        { emoji: '🦔', ro: 'Arici', en: 'Hedgehog', sound: 'a-rich', animalSound: 'Chițăit', facts: ['Are țepi', 'Se face ghem', 'Mănâncă insecte'], description: 'Ariciul se face ghem când se sperie' }
      ],
      water: [
        { emoji: '🐟', ro: 'Pește', en: 'Fish', sound: 'pesh-te', animalSound: 'Glu-Glu', facts: ['Înoată în apă', 'Are solzi', 'Respiră prin branhii'], description: 'Peștele trăiește în apă și are înotătoare' },
        { emoji: '🐸', ro: 'Broască', en: 'Frog', sound: 'brwa-skə', animalSound: 'Oac-Oac', facts: ['Sare pe mal', 'Verde', 'Mănâncă muște'], description: 'Broasca sare din baltă pe mal' },
        { emoji: '🦢', ro: 'Lebădă', en: 'Swan', sound: 'le-bə-də', animalSound: 'Sss', facts: ['Gât lung', 'Albă și elegantă', 'Înoată grațios'], description: 'Lebăda este cea mai elegantă pasăre de pe lac' },
        { emoji: '🐢', ro: 'Broască țestoasă', en: 'Turtle', sound: 'brwa-skə tses-twa-sə', animalSound: 'Șuierat', facts: ['Carapace', 'Se mișcă încet', 'Trăiește mult'], description: 'Broasca țestoasă are o carapace tare' },
        { emoji: '🦀', ro: 'Crab', en: 'Crab', sound: 'krab', animalSound: 'Clic-Clic', facts: ['Merge lateral', 'Clești puternici', 'Trăiește pe fund'], description: 'Crabul merge în lateral pe fundul apei' }
      ],
      safari: [
        { emoji: '🦁', ro: 'Leu', en: 'Lion', sound: 'leu', animalSound: 'Roar', facts: ['Regele junglei', 'Coamă mare', 'Vânător puternic'], description: 'Leul este regele animalelor din savană' },
        { emoji: '🐘', ro: 'Elefant', en: 'Elephant', sound: 'e-le-fant', animalSound: 'Trompetă', facts: ['Cel mai mare', 'Trompă lungă', 'Memorie bună'], description: 'Elefantul are o memorie extraordinară' },
        { emoji: '🦒', ro: 'Girafă', en: 'Giraffe', sound: 'ji-ra-fə', animalSound: 'Hmm', facts: ['Gât lung', 'Cea mai înaltă', 'Pete frumoase'], description: 'Girafa este cel mai înalt animal de pe pământ' },
        { emoji: '🦓', ro: 'Zebră', en: 'Zebra', sound: 'ze-brə', animalSound: 'Nechezat', facts: ['Dungi alb-negru', 'Ca un cal', 'Fuge în turmă'], description: 'Zebra are dungi unice ca amprentele' },
        { emoji: '🐵', ro: 'Maimuță', en: 'Monkey', sound: 'mai-mu-tsə', animalSound: 'Uh-Uh-Ah', facts: ['Se cațără', 'Mănâncă banane', 'Jucăușă'], description: 'Maimuța se leagănă din copac în copac' },
        { emoji: '🦛', ro: 'Hipopotam', en: 'Hippo', sound: 'hi-po-po-tam', animalSound: 'Groohnt', facts: ['Gura mare', 'Stă în apă', 'Greu'], description: 'Hipopotamul stă în apă toată ziua' }
      ],
      pet: [
        { emoji: '🐭', ro: 'Șoarece', en: 'Mouse', sound: 'shwa-re-che', animalSound: 'Chit-Chit', facts: ['Mic și iute', 'Roade', 'Se ascunde'], description: 'Șoarecele este mic și se mișcă repede' },
        { emoji: '🐹', ro: 'Hamster', en: 'Hamster', sound: 'ham-ster', animalSound: 'Squeak', facts: ['Obrajii mari', 'Roata de alergat', 'Strânge mâncare'], description: 'Hamsterul strânge mâncare în obraji' },
        { emoji: '🐦', ro: 'Pasăre', en: 'Bird', sound: 'pa-sə-re', animalSound: 'Cip-Cirip', facts: ['Zboară', 'Cântă', 'Face cuib'], description: 'Pasărea cântă dimineața în copac' },
        { emoji: '🐠', ro: 'Pește de acvariu', en: 'Goldfish', sound: 'pesh-te', animalSound: 'Glu', facts: ['Colorat', 'În acvariu', 'Înotătoare frumoase'], description: 'Peștele de acvariu este colorat și frumos' }
      ]
    };
    
    let currentAnimal = null;
    let currentHabitat = 'all';
    let gameMode = 'learn';
    let score = 0;
    let level = 1;
    let xp = 0;
    let coins = 0;
    let lives = 3;
    let combo = 0;
    let unlockedAnimals = [];
    let dailyChallengeProgress = 0;
    let memoryCards = [];
    let flippedCards = [];
    let matchedPairs = 0;
    let soundsPlayed = false;
    
    function getAllAnimals() {
      if (currentHabitat === 'all') {
        return Object.values(animals).flat();
      }
      return animals[currentHabitat] || [];
    }
    
    // Improved Romanian TTS: pick a good ro-RO voice and reuse it
    let roVoice = null;
    function pickRomanianVoice() {
      const voices = window.speechSynthesis?.getVoices?.() || [];
      const ro = voices.filter(v => (v.lang||'').toLowerCase().startsWith('ro'));
      roVoice = ro.find(v => /google|microsoft/i.test(v.name)) || ro[0] || null;
      return roVoice;
    }
    if (typeof speechSynthesis !== 'undefined') {
      speechSynthesis.onvoiceschanged = () => { if (!roVoice) pickRomanianVoice(); };
      pickRomanianVoice();
    }
    function speakRO(text, { rate = 0.9, pitch = 1.0, vol = 1.0 } = {}) {
      if (!text) return;
      try { speechSynthesis.cancel(); } catch(_) {}
      const u = new SpeechSynthesisUtterance(String(text));
      u.lang = (roVoice && roVoice.lang) ? roVoice.lang : 'ro-RO';
      u.voice = roVoice || null;
      u.rate = rate; u.pitch = pitch; u.volume = vol;
      speechSynthesis.speak(u);
    }

    function playAnimalName() {
      if (!currentAnimal || soundsPlayed) return;
      speakRO((currentAnimal.ro || '').toLowerCase(), { rate: 0.9, pitch: 1.0 });
      
      document.getElementById('animalEmoji').style.animation = 'none';
      setTimeout(() => {
        document.getElementById('animalEmoji').style.animation = 'animalBounce 2s ease-in-out infinite';
      }, 10);
    }
    
    function playAnimalSound() {
      if (!currentAnimal) return;
      speakRO(currentAnimal.animalSound, { rate: 0.95, pitch: 1.1 });
    }
    
    function playDescription() {
      if (!currentAnimal) return;
      speakRO((currentAnimal.description || '').toLowerCase(), { rate: 0.9, pitch: 1.0 });
    }
    
    function setGameMode(mode) {
      gameMode = mode;
      document.querySelectorAll('.mode-btn').forEach(btn => btn.classList.remove('active'));
      event.target.classList.add('active');
      
      if (mode === 'memory') {
        setupMemoryGame();
      } else if (mode === 'zoo') {
        showZooCollection();
      } else {
        loadNewAnimal();
      }
    }
    
    function selectHabitat(habitat) {
      currentHabitat = habitat;
      document.querySelectorAll('.habitat-btn').forEach(btn => btn.classList.remove('active'));
      event.target.classList.add('active');
      loadNewAnimal();
    }
    
    function getRandomAnimals(correct, count = 4) {
      const allAnimals = getAllAnimals();
      const options = [correct];
      const available = allAnimals.filter(a => a.en !== correct.en);
      
      while (options.length < count && available.length > 0) {
        const randomIndex = Math.floor(Math.random() * available.length);
        const animal = available[randomIndex];
        if (!options.some(o => o.en === animal.en)) {
          options.push(animal);
          available.splice(randomIndex, 1);
        }
      }
      
      return options.sort(() => Math.random() - 0.5);
    }
    
    function updateDisplay() {
      if (!currentAnimal) return;
      
      document.getElementById('animalEmoji').textContent = currentAnimal.emoji;
      document.getElementById('animalName').textContent = currentAnimal.ro;
      document.getElementById('pronunciation').textContent = `[${currentAnimal.sound}]`;
      
      // Update facts
      const factsHtml = currentAnimal.facts.map(fact => 
        `<div class="fact-badge">${fact}</div>`
      ).join('');
      document.querySelector('.animal-facts').innerHTML = factsHtml;
      
      // Update challenge based on game mode
      const challengeTypes = [
        'Ce animal este acesta?',
        'Alege traducerea corectă',
        'Care animal face acest sunet?',
        'Găsește animalul din ' + (currentHabitat === 'all' ? 'lume' : currentHabitat)
      ];
      
      if (gameMode === 'sounds') {
        document.getElementById('challengeType').textContent = 'Care animal face acest sunet?';
        document.getElementById('animalEmoji').textContent = '❓';
        document.getElementById('animalName').textContent = '???';
        playAnimalSound();
      } else if (gameMode === 'quiz') {
        const randomChallenge = challengeTypes[Math.floor(Math.random() * challengeTypes.length)];
        document.getElementById('challengeType').textContent = randomChallenge;
      } else {
        document.getElementById('challengeType').textContent = 'Apasă pe animal pentru a auzi numele';
      }
    }
    
    function loadNewAnimal() {
      const allAnimals = getAllAnimals();
      if (allAnimals.length === 0) return;
      
      soundsPlayed = false;
      currentAnimal = allAnimals[Math.floor(Math.random() * allAnimals.length)];
      
      updateDisplay();
      
      const options = getRandomAnimals(currentAnimal);
      const optionsContainer = document.getElementById('options');
      optionsContainer.innerHTML = '';
      
      options.forEach((option, index) => {
        const btn = document.createElement('button');
        btn.className = 'option-btn';
        btn.textContent = option.en;
        btn.onclick = function() { checkAnswer(this, option.en === currentAnimal.en); };
        optionsContainer.appendChild(btn);
      });
      
      // Auto-play sound in learn mode
      if (gameMode === 'learn' && !soundsPlayed) {
        setTimeout(playAnimalName, 500);
        soundsPlayed = true;
      }
    }
    
    function checkAnswer(button, isCorrect) {
      const buttons = document.querySelectorAll('.option-btn');
      buttons.forEach(btn => btn.disabled = true);
      
      if (isCorrect) {
        button.classList.add('correct');
        score += 10 * (combo + 1);
        coins += 5 + combo;
        xp += 15;
        combo++;
        
        // Add to unlocked animals
        if (!unlockedAnimals.includes(currentAnimal.ro)) {
          unlockedAnimals.push(currentAnimal.ro);
          checkAchievements();
        }
        
        // Show combo
        if (combo >= 3) {
          const comboEl = document.getElementById('comboIndicator');
          comboEl.textContent = `COMBO x${combo}!`;
          comboEl.classList.add('show');
          setTimeout(() => comboEl.classList.remove('show'), 1000);
        }
        
        // Daily challenge progress
        if (currentHabitat === 'forest') {
          dailyChallengeProgress++;
          if (dailyChallengeProgress === 5) {
            coins += 50;
            showAchievement('Daily Challenge Complete! +50 coins');
          }
        }
        
        // Success sound effect
        if (gameMode === 'sounds') {
          updateDisplay(); // Reveal the animal
        }
      } else {
        button.classList.add('wrong');
        combo = 0;
        lives--;
        updateLives();
        
        // Show correct answer
        buttons.forEach(btn => {
          if (btn.textContent === currentAnimal.en) {
            btn.classList.add('correct');
          }
        });
      }
      
      updateStats();
      
      // Check level up
      if (xp >= 100) {
        levelUp();
      }
      
      // Load next animal
      setTimeout(() => {
        buttons.forEach(btn => {
          btn.classList.remove('correct', 'wrong');
          btn.disabled = false;
        });
        loadNewAnimal();
      }, 1400);
    }
    
    function updateStats() {
      document.getElementById('coins').textContent = coins;
      document.getElementById('xp').textContent = xp;
      document.getElementById('playerScore').textContent = score;
      
      const xpPercent = (xp % 100);
      document.getElementById('xpBar').style.width = `${xpPercent}%`;
    }
    
    function updateLives() {
      const livesEl = document.getElementById('lives');
      let heartsHtml = '';
      for (let i = 0; i < 3; i++) {
        if (i < lives) {
          heartsHtml += '❤️';
        } else {
          heartsHtml += '💔';
        }
      }
      livesEl.innerHTML = heartsHtml;
      
      if (lives === 0) {
        setTimeout(() => {
          alert(`Game Over! Scor final: ${score} puncte, ${coins} monede`);
          resetGame();
        }, 500);
      }
    }
    
    function levelUp() {
      level++;
      document.getElementById('level').textContent = level;
      xp = xp % 100;
      lives = Math.min(3, lives + 1);
      updateLives();
      showAchievement(`Level ${level}! +1 viață`);
    }
    
    function showAchievement(text) {
      const tooltip = document.getElementById('tooltip');
      tooltip.textContent = text;
      tooltip.style.top = '50%';
      tooltip.style.left = '50%';
      tooltip.style.transform = 'translate(-50%, -50%)';
      tooltip.classList.add('show');
      
      setTimeout(() => {
        tooltip.classList.remove('show');
      }, 3000);
    }
    
    function checkAchievements() {
      const achievements = document.querySelectorAll('.achievement');
      
      if (unlockedAnimals.length >= 1) {
        achievements[0].classList.add('unlocked');
      }
      if (unlockedAnimals.length >= 10) {
        achievements[1].classList.add('unlocked');
        coins += 25;
      }
      
      // Check habitat achievements
      const farmAnimals = animals.farm.filter(a => unlockedAnimals.includes(a.ro));
      if (farmAnimals.length === animals.farm.length) {
        achievements[2].classList.add('unlocked');
        coins += 30;
      }
    }
    
    function setupMemoryGame() {
      const animalStage = document.querySelector('.animal-stage');
      const allAnimals = getAllAnimals().slice(0, 8);
      memoryCards = [...allAnimals, ...allAnimals];
      memoryCards.sort(() => Math.random() - 0.5);
      
      let html = '<div class="memory-grid">';
      memoryCards.forEach((animal, index) => {
        html += `
          <div class="memory-card" data-index="${index}" onclick="flipCard(${index})">
            <span style="display: none;">${animal.emoji}</span>
          </div>
        `;
      });
      html += '</div>';
      
      animalStage.innerHTML = html;
      document.querySelector('.challenge-area').style.display = 'none';
    }
    
    function flipCard(index) {
      if (flippedCards.length === 2) return;
      
      const card = document.querySelector(`[data-index="${index}"]`);
      if (card.classList.contains('flipped') || card.classList.contains('matched')) return;
      
      card.classList.add('flipped');
      card.querySelector('span').style.display = 'block';
      card.textContent = memoryCards[index].emoji;
      flippedCards.push({index, animal: memoryCards[index]});
      
      if (flippedCards.length === 2) {
        setTimeout(checkMemoryMatch, 1000);
      }
    }
    
    function checkMemoryMatch() {
      const [card1, card2] = flippedCards;
      
      if (card1.animal.ro === card2.animal.ro) {
        document.querySelector(`[data-index="${card1.index}"]`).classList.add('matched');
        document.querySelector(`[data-index="${card2.index}"]`).classList.add('matched');
        matchedPairs++;
        coins += 10;
        xp += 20;
        
        if (matchedPairs === 8) {
          showAchievement('Memory Master! +50 coins');
          coins += 50;
          setTimeout(() => {
            gameMode = 'learn';
            loadNewAnimal();
          }, 2000);
        }
      } else {
        document.querySelector(`[data-index="${card1.index}"]`).classList.remove('flipped');
        document.querySelector(`[data-index="${card2.index}"]`).classList.remove('flipped');
        setTimeout(() => {
          document.querySelector(`[data-index="${card1.index}"]`).textContent = '';
          document.querySelector(`[data-index="${card2.index}"]`).textContent = '';
        }, 300);
      }
      
      flippedCards = [];
      updateStats();
    }
    
    function showZooCollection() {
      const animalStage = document.querySelector('.animal-stage');
      const allAnimals = Object.values(animals).flat();
      
      let html = '<h3>🦁 Colecția ta Zoo 🦁</h3><div class="zoo-collection">';
      allAnimals.forEach(animal => {
        const isUnlocked = unlockedAnimals.includes(animal.ro);
        html += `
          <div class="zoo-animal ${isUnlocked ? '' : 'locked'}" 
               title="${isUnlocked ? animal.ro : '???'}"
               onclick="${isUnlocked ? `playZooAnimal('${animal.ro}')` : ''}">
            ${isUnlocked ? animal.emoji : '❓'}
          </div>
        `;
      });
      html += '</div>';
      html += `<p style="text-align: center; margin-top: 20px;">
                Ai deblocat ${unlockedAnimals.length} din ${allAnimals.length} animale!</p>`;
      
      animalStage.innerHTML = html;
      document.querySelector('.challenge-area').style.display = 'none';
    }
    
    function playZooAnimal(animalName) {
      speakRO(String(animalName || '').toLowerCase(), { rate: 0.9 });
    }
    
    function resetGame() {
      score = 0;
      level = 1;
      xp = 0;
      coins = 0;
      lives = 3;
      combo = 0;
      updateStats();
      updateLives();
      loadNewAnimal();
    }
    
    // Initialize game
    loadNewAnimal();
    updateStats();
    
    // Keyboard support
    document.addEventListener('keydown', (e) => {
      if (e.key >= '1' && e.key <= '4') {
        const buttons = document.querySelectorAll('.option-btn:not([disabled])');
        const index = parseInt(e.key) - 1;
        if (buttons[index]) {
          buttons[index].click();
        }
      } else if (e.key === ' ') {
        e.preventDefault();
        playAnimalName();
      } else if (e.key === 's') {
        playAnimalSound();
      } else if (e.key === 'd') {
        playDescription();
      }
    });
    
    // Add periodic challenges
    setInterval(() => {
      if (Math.random() < 0.1 && gameMode === 'learn') {
        showAchievement('⚡ Bonus Time! Double coins for 30 seconds!');
        // Implement bonus time logic
      }
    }, 60000);
  </script>
</body>
</html>
