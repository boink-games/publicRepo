<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Culori RomÃ¢neÈ™ti - Learn Romanian Colors</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Quicksand:wght@400;500;600;700&display=swap');
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    html, body { height: 100%; }
    body {
      min-height: 100vh;
      font-family: 'Quicksand', sans-serif;
      background: #2c3e50;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 16px;
      position: relative;
      overflow: hidden;
    }
    
    .color-bubbles {
      position: absolute;
      width: 100%;
      height: 100%;
      pointer-events: none;
    }
    
    .bubble {
      position: absolute;
      border-radius: 50%;
      animation: floatBubble 20s infinite;
      filter: blur(40px);
      opacity: 0.6;
    }
    
    @keyframes floatBubble {
      0%, 100% {
        transform: translateY(0) translateX(0) scale(1);
      }
      33% {
        transform: translateY(-100px) translateX(50px) scale(1.2);
      }
      66% {
        transform: translateY(50px) translateX(-30px) scale(0.8);
      }
    }
    
    .game-container {
      max-width: 640px;
      width: 100%;
      background: rgba(255, 255, 255, 0.98);
      backdrop-filter: blur(20px);
      border-radius: 35px;
      padding: 24px 20px;
      box-shadow: 0 35px 70px rgba(0, 0, 0, 0.3);
      position: relative;
      z-index: 1;
      border: 3px solid rgba(255, 255, 255, 0.5);
      max-height: calc(100vh - 24px);
      overflow: auto;
    }
    
    .title {
      text-align: center;
      margin-bottom: 30px;
    }
    
    .title h1 {
      font-size: 32px;
      font-weight: 700;
      color: #2c3e50;
      margin-bottom: 10px;
      position: relative;
    }
    
    .rainbow-text {
      background: linear-gradient(90deg, 
        #ff0000 0%, 
        #ff7f00 14%, 
        #ffff00 28%, 
        #00ff00 42%, 
        #0000ff 56%, 
        #4b0082 70%, 
        #9400d3 84%, 
        #ff0000 100%);
      background-size: 200% 100%;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      animation: rainbow 5s linear infinite;
    }
    
    @keyframes rainbow {
      0% { background-position: 0% 0%; }
      100% { background-position: 200% 0%; }
    }
    
    .subtitle { color: #666; font-size: 16px; font-weight: 500; }
    
    .color-display {
      text-align: center;
      margin: 20px 0;
      cursor: pointer;
      transition: transform 0.3s ease;
    }
    
    .color-display:hover {
      transform: scale(1.02);
    }
    
    .color-box {
      width: 170px;
      height: 170px;
      margin: 0 auto 25px;
      border-radius: 25px;
      box-shadow: 
        0 15px 40px rgba(0,0,0,0.2),
        inset 0 2px 5px rgba(255,255,255,0.5);
      position: relative;
      overflow: hidden;
      animation: pulse 3s ease-in-out infinite;
    }
    
    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }
    
    .color-box::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: linear-gradient(45deg, 
        transparent 30%, 
        rgba(255,255,255,0.3) 50%, 
        transparent 70%);
      animation: shine 3s infinite;
    }
    
    @keyframes shine {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    .color-name {
      font-size: 28px;
      font-weight: 700;
      color: #2c3e50;
      margin-bottom: 10px;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
    }
    
    .pronunciation { color: #888; font-size: 14px; font-style: italic; margin-bottom: 16px; }
    
    .sound-btn {
      background: #2c3e50;
      color: white;
      border: none;
      padding: 10px 22px;
      border-radius: 40px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 5px 15px rgba(44, 62, 80, 0.3);
    }
    
    .sound-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 20px rgba(44, 62, 80, 0.4);
      background: #34495e;
    }
    
    .sound-btn:active {
      transform: translateY(0);
    }
    
    .color-palette {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin: 18px 0 8px;
      flex-wrap: wrap;
    }
    
    .mini-color {
      width: 36px;
      height: 36px;
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 3px 10px rgba(0,0,0,0.2);
      position: relative;
    }
    
    .mini-color:hover {
      transform: translateY(-5px) scale(1.2);
      box-shadow: 0 5px 15px rgba(0,0,0,0.3);
    }
    
    .mini-color.active {
      border: 3px solid #2c3e50;
      transform: scale(1.2);
    }
    
    .options { display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px; margin-top: 18px; }
    
    .option-btn {
      background: white;
      border: 3px solid #e0e0e0;
      padding: 14px;
      border-radius: 16px;
      font-size: 17px;
      font-weight: 600;
      color: #2c3e50;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
    }
    
    .option-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 18px rgba(0,0,0,0.12);
      border-color: #3498db;
      background: #f8f9fa;
    }
    
    .option-btn.correct {
      background: #27ae60;
      color: white;
      border-color: #27ae60;
      animation: successPulse 0.6s ease;
    }
    
    .option-btn.wrong {
      background: #e74c3c;
      color: white;
      border-color: #e74c3c;
      animation: errorShake 0.5s ease;
    }
    
    @keyframes successPulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.08); }
    }
    
    @keyframes errorShake {
      0%, 100% { transform: translateX(0); }
      20% { transform: translateX(-10px); }
      40% { transform: translateX(10px); }
      60% { transform: translateX(-10px); }
      80% { transform: translateX(10px); }
    }
    
    .streak {
      text-align: center;
      margin-top: 16px;
      padding: 12px;
      background: linear-gradient(135deg, #3498db, #2ecc71);
      border-radius: 20px;
      color: white;
    }
    
    .streak-number {
      font-size: 32px;
      font-weight: 700;
    }
    
    .streak-text { font-size: 14px; opacity: 0.9; }
    
    .progress { margin-top: 14px; height: 8px;
      background: rgba(0,0,0,0.1);
      border-radius: 50px;
      overflow: hidden;
    }
    
    .progress-bar {
      height: 100%;
      background: linear-gradient(90deg, #3498db, #2ecc71, #f39c12, #e74c3c, #9b59b6);
      border-radius: 50px;
      width: 0%;
      transition: width 0.8s ease;
    }
    @media (max-width: 480px) {
      .game-container { padding: 16px 14px; border-radius: 24px; }
      .title h1 { font-size: 26px; }
      .subtitle { font-size: 14px; }
      .color-box { width: 140px; height: 140px; margin-bottom: 16px; }
      .color-name { font-size: 24px; }
      .pronunciation { font-size: 13px; }
      .option-btn { padding: 12px; font-size: 16px; }
    }
    @media (max-width: 360px) {
      .options { grid-template-columns: 1fr; }
      .title h1 { font-size: 22px; }
      .color-box { width: 120px; height: 120px; }
      .color-name { font-size: 22px; }
      .sound-btn { padding: 8px 14px; font-size: 14px; }
    }
  </style>
</head>
<body>
  <div class="color-bubbles">
    <div class="bubble" style="width: 150px; height: 150px; background: #ff6b6b; top: 10%; left: 10%; animation-delay: 0s;"></div>
    <div class="bubble" style="width: 200px; height: 200px; background: #4ecdc4; top: 60%; right: 10%; animation-delay: 5s;"></div>
    <div class="bubble" style="width: 180px; height: 180px; background: #ffe66d; bottom: 10%; left: 30%; animation-delay: 10s;"></div>
    <div class="bubble" style="width: 120px; height: 120px; background: #a8e6cf; top: 30%; right: 30%; animation-delay: 15s;"></div>
  </div>
  
  <div class="game-container">
    <div class="title">
      <h1 class="rainbow-text">ðŸŽ¨ Culori RomÃ¢neÈ™ti ðŸŽ¨</h1>
      <div class="subtitle">ApasÄƒ pe culoare È™i ghiceÈ™te numele!</div>
    </div>
    
    <div class="color-display" onclick="playSound()">
      <div class="color-box" id="colorBox" style="background: #e74c3c;"></div>
      <div class="color-name" id="colorName">RoÈ™u</div>
      <div class="pronunciation" id="pronunciation">[ro-shoo]</div>
      <button class="sound-btn" onclick="playSound(event)">ðŸ”Š AscultÄƒ</button>
    </div>
    
    <div class="color-palette" id="colorPalette"></div>
    
    <div class="options" id="options">
      <button class="option-btn" onclick="checkAnswer(this)">Red</button>
      <button class="option-btn" onclick="checkAnswer(this)">Blue</button>
      <button class="option-btn" onclick="checkAnswer(this)">Green</button>
      <button class="option-btn" onclick="checkAnswer(this)">Yellow</button>
    </div>
    
    <div class="streak">
      <div class="streak-number" id="streakNumber">0 ðŸ”¥</div>
      <div class="streak-text">Serie de rÄƒspunsuri corecte</div>
    </div>
    
    <div class="progress">
      <div class="progress-bar" id="progressBar"></div>
    </div>
  </div>
  
  <script>
    const colors = [
      { ro: 'RoÈ™u', en: 'Red', hex: '#e74c3c', sound: 'ro-shoo' },
      { ro: 'Albastru', en: 'Blue', hex: '#3498db', sound: 'al-bas-troo' },
      { ro: 'Verde', en: 'Green', hex: '#27ae60', sound: 'ver-deh' },
      { ro: 'Galben', en: 'Yellow', hex: '#f1c40f', sound: 'gal-ben' },
      { ro: 'Portocaliu', en: 'Orange', hex: '#e67e22', sound: 'por-to-ka-lee-oo' },
      { ro: 'Mov', en: 'Purple', hex: '#9b59b6', sound: 'mov' },
      { ro: 'Roz', en: 'Pink', hex: '#ff69b4', sound: 'roz' },
      { ro: 'Maro', en: 'Brown', hex: '#8b4513', sound: 'ma-ro' },
      { ro: 'Negru', en: 'Black', hex: '#2c3e50', sound: 'neh-groo' },
      { ro: 'Alb', en: 'White', hex: '#ecf0f1', sound: 'alb' },
      { ro: 'Gri', en: 'Gray', hex: '#95a5a6', sound: 'gree' },
      { ro: 'Turcoaz', en: 'Turquoise', hex: '#1abc9c', sound: 'tur-kwaz' }
    ];
    
    let currentColor = null;
    let streak = 0;
    let total = 0;
    let correct = 0;
    
    // Improved Romanian TTS: pick best available ro-RO voice and tweak pacing
    let roVoice = null;
    function pickRomanianVoice() {
      const voices = window.speechSynthesis?.getVoices?.() || [];
      const roVoices = voices.filter(v => (v.lang||'').toLowerCase().startsWith('ro'));
      // Prefer Google/Microsoft voices if available
      const pref = roVoices.find(v => /google|microsoft/i.test(v.name)) || roVoices[0] || null;
      roVoice = pref;
      return roVoice;
    }
    if (typeof speechSynthesis !== 'undefined') {
      // Ensure voices are loaded
      speechSynthesis.onvoiceschanged = () => { if (!roVoice) pickRomanianVoice(); };
      pickRomanianVoice();
    }
    function speakRO(text) {
      if (!text) return;
      try { speechSynthesis.cancel(); } catch(_) {}
      const u = new SpeechSynthesisUtterance(String(text));
      u.lang = (roVoice && roVoice.lang) ? roVoice.lang : 'ro-RO';
      u.voice = roVoice || null;
      u.rate = 0.9; // calmer pacing for clarity
      u.pitch = 1.0;
      u.volume = 1.0;
      speechSynthesis.speak(u);
    }

    function playSound(event) {
      if (event) event.stopPropagation();
      if (!currentColor) return;
      // Use lowercase for more natural pronunciation and ensure diacritics are kept
      const phrase = currentColor.ro.toLowerCase();
      speakRO(phrase);
      
      // Animate color box
      const box = document.getElementById('colorBox');
      box.style.animation = 'none';
      setTimeout(() => {
        box.style.animation = 'pulse 3s ease-in-out infinite';
      }, 10);
    }
    
    function createColorPalette() {
      const palette = document.getElementById('colorPalette');
      palette.innerHTML = '';
      
      colors.forEach(color => {
        const miniColor = document.createElement('div');
        miniColor.className = 'mini-color';
        miniColor.style.background = color.hex;
        miniColor.title = color.ro;
        miniColor.onclick = () => selectColor(color);
        
        if (color === currentColor) {
          miniColor.classList.add('active');
        }
        
        palette.appendChild(miniColor);
      });
    }
    
    function selectColor(color) {
      currentColor = color;
      document.getElementById('colorBox').style.background = color.hex;
      document.getElementById('colorName').textContent = color.ro;
      document.getElementById('pronunciation').textContent = `[${color.sound}]`;
      
      createColorPalette();
      loadOptions();
      playSound();
    }
    
    function getRandomOptions(correct, count = 4) {
      const options = [correct];
      const available = colors.filter(c => c.en !== correct.en);
      
      while (options.length < count) {
        const random = available[Math.floor(Math.random() * available.length)];
        if (!options.some(o => o.en === random.en)) {
          options.push(random);
        }
      }
      
      return options.sort(() => Math.random() - 0.5);
    }
    
    function loadOptions() {
      const options = getRandomOptions(currentColor);
      const container = document.getElementById('options');
      container.innerHTML = '';
      
      options.forEach((option, index) => {
        const btn = document.createElement('button');
        btn.className = 'option-btn';
        btn.textContent = option.en;
        btn.onclick = function() { checkAnswer(this, option.en === currentColor.en); };
        btn.style.animationDelay = `${index * 0.1}s`;
        container.appendChild(btn);
      });
    }
    
    function loadNewColor() {
      const randomIndex = Math.floor(Math.random() * colors.length);
      currentColor = colors[randomIndex];
      
      document.getElementById('colorBox').style.background = currentColor.hex;
      document.getElementById('colorName').textContent = currentColor.ro;
      document.getElementById('pronunciation').textContent = `[${currentColor.sound}]`;
      
      createColorPalette();
      loadOptions();
      
      // Auto-play sound
      setTimeout(playSound, 500);
    }
    
    function checkAnswer(button, isCorrect) {
      const buttons = document.querySelectorAll('.option-btn');
      buttons.forEach(btn => btn.disabled = true);
      
      total++;
      
      if (isCorrect) {
        correct++;
        streak++;
        button.classList.add('correct');
        
        // Update streak display
        document.getElementById('streakNumber').textContent = `${streak} ðŸ”¥`;
        
        // Celebration effect
        if (streak >= 3) {
          document.getElementById('streakNumber').style.animation = 'successPulse 0.6s ease';
        }
      } else {
        streak = 0;
        button.classList.add('wrong');
        document.getElementById('streakNumber').textContent = `0 ðŸ”¥`;
        
        // Show correct answer
        buttons.forEach(btn => {
          if (btn.textContent === currentColor.en) {
            btn.classList.add('correct');
          }
        });
      }
      
      // Update progress
      const progress = (correct / 12) * 100;
      document.getElementById('progressBar').style.width = `${Math.min(progress, 100)}%`;
      
      // Load next color
      setTimeout(() => {
        buttons.forEach(btn => {
          btn.classList.remove('correct', 'wrong');
          btn.disabled = false;
        });
        document.getElementById('streakNumber').style.animation = '';
        loadNewColor();
      }, 1400);
    }
    
    // Initialize
    loadNewColor();
    
    // Keyboard support
    document.addEventListener('keydown', (e) => {
      if (e.key >= '1' && e.key <= '4') {
        const buttons = document.querySelectorAll('.option-btn:not([disabled])');
        const index = parseInt(e.key) - 1;
        if (buttons[index]) {
          buttons[index].click();
        }
      } else if (e.key === ' ') {
        e.preventDefault();
        playSound();
      }
    });
  </script>
</body>
</html>
