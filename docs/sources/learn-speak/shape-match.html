<!doctype html>
<html lang="en">
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Shapes</title>
 <link rel="stylesheet" href="./common.css" />
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Bangers&family=Fredoka+One&family=Poppins:wght@800&display=swap');

    :root {
      --primary-bg-light: #e8f5e9; /* Light Green */
      --primary-bg-dark: #c8e6c9;  /* Medium Green */
      --game-title-color: #4caf50; /* Green 500 */
      --game-title-shadow-light: rgba(255, 255, 255, 0.7); 
      --game-title-shadow-dark: rgba(0, 0, 0, 0.15);
      --text-color: #333333;
      --card-border-color: #81c784; /* Green 300 */
      --card-shadow-color: rgba(0, 0, 0, 0.15);
      --card-hover-border: #66bb6a; /* Green 400 */
    }

    body {
      background: linear-gradient(135deg, var(--primary-bg-light) 0%, var(--primary-bg-dark) 100%);
      font-family: 'Fredoka One', cursive;
      color: var(--text-color);
    }

    .game-main-title {
      font-family: 'Poppins', sans-serif;
      font-weight: 800; /* ExtraBold */
      font-size: 3.5em;
      color: var(--game-title-color);
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3); /* Subtle shadow */
      margin-bottom: 5px; /* Reduced margin to bring subtitle closer */
      text-align: center;
      line-height: 1;
      letter-spacing: 2px;
      animation: bounceIn 1s ease-out;
    }

    @keyframes bounceIn {
      0% { transform: scale(0.3); opacity: 0; }
      50% { transform: scale(1.1); opacity: 1; }
      70% { transform: scale(0.9); }
      100% { transform: scale(1); }
    }

    .game-subtitle {
      font-family: 'Fredoka One', cursive;
      font-size: 1.2em;
      color: var(--text-color);
      text-align: center;
      margin-top: 0;
      margin-bottom: 20px;
      opacity: 0.8;
    }

    @media (max-width: 480px) {
      .game-main-title {
        font-size: 2.8em;
        margin-bottom: 10px;
      }
      .game-subtitle {
        font-size: 1em;
        margin-bottom: 15px;
      }
    }

    .prompt-top {
      display: flex;
      align-items: stretch; /* Stretch items to fill the height */
      justify-content: flex-start; /* Align both to the left */
      gap: 12px;
      flex-wrap: wrap;
      width: 100%;
    }

    /* Existing styles */

    .board {
      margin-top: 30px; /* Add space below the title/subtitle */
      background: linear-gradient(160deg, #ffffff 0%, #f8fff5 100%);
      box-shadow: 0 20px 45px var(--card-shadow-color);
      border-radius: 28px;
      padding: 32px 28px;
    }

    .choices {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(90px, 1fr)); /* Default for smaller screens */
      gap: 18px;
    }

    @media (min-width: 600px) {
      .choices {
        grid-template-columns: repeat(3, 1fr); /* 3 columns for wider screens */
      }
    }

    .card {
      border: 3px solid var(--card-border-color);
      border-radius: 20px;
      padding: 20px;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(.25, .8, .25, 1);
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 160px; /* Increased min-height */
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); /* More subtle shadow */
      position: relative;
      overflow: hidden;
    }

    .card:hover {
      transform: translateY(-8px) scale(1.03);
      border-color: var(--card-hover-border);
      box-shadow: 0 12px 25px var(--card-shadow-color);
    }

    .card div {
      /* Styles for the shapes themselves */
      transition: all 0.3s ease;
    }

    .speak {
      height: 50px; /* Smaller height */
      font-size: 1.1em; /* Smaller font */
      padding: 10px 20px; /* Less padding */
      background: linear-gradient(145deg, #a7ffeb, #64ffda); /* Green-mint-lime gradient */
      color: #004d40; /* Dark teal text for contrast */
      border: none;
      border-radius: 30px; /* More rounded */
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
      display: block; /* Make it a block element */
      margin: 0 auto; /* Center it */
      align-items: center;
      justify-content: center;
      gap: 10px; /* Increased gap */
      position: relative; /* For animation */
      overflow: hidden; /* For ripple effect */
    }

    .speak:hover {
      transform: translateY(-3px) scale(1.02);
      box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
    }

    .speak.pulsating {
      animation: pulse 1.5s infinite ease-in-out;
    }

    @keyframes pulse {
      0% { transform: scale(1); box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15); }
      50% { transform: scale(1.03); box-shadow: 0 8px 16px rgba(0, 0, 0, 0.25); }
      100% { transform: scale(1); box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15); }
    }

    .speak span.icon {
      transition: transform 0.3s ease;
      display: inline-block;
    }

    .speak:hover span.icon {
      transform: scale(1.2) rotate(10deg);
    }

    /* Responsive adjustments */

    .feedback {
      font-family: 'Bangers', cursive;
      font-size: 2.2em;
      letter-spacing: 1px;
      text-shadow: 2px 2px 0px rgba(255, 255, 255, 0.7);
    }

    .feedback.ok {
      color: #28a745;
    }

    .feedback.bad {
      color: #dc3545;
    }

    /* Responsive adjustments */
    @media (max-width: 360px) {
      .choices {
        grid-template-columns: 1fr 1fr;
        gap: 12px;
      }

      .card {
        min-height: 120px;
        padding: 15px;
      }

      .card div {
        /* Shapes should scale proportionally */
      }

      .speak {
        font-size: 1em;
        padding: 8px 15px;
      }

      .feedback {
        font-size: 1.8em;
      }
    }

    @media (max-width: 480px) {
      .board {
        padding: 25px 20px;
        gap: 18px;
      }

      .game-title {
        font-size: 38px;
      }

      .fruit-icons {
        font-size: 26px;
      }

      .scoreboard {
        font-size: 17px;
        padding: 7px 15px;
      }

      .prompt-top {
        gap: 12px;
      }
    }
  </style><body>
<div class="game">
  <h1 class="game-main-title">Shapes Fun!</h1>
  <p class="game-subtitle">Press the button to hear the shape, then choose the right one!</p>
  <div class="board">
    <div class="prompt">
      <button class="speak" id="speak"><span class="icon">ðŸŽ¤</span> Say shape</button>
      <div class="feedback" id="fb"></div>
    </div>
    <div class="choices" id="choices"></div>
  </div>
</div>
<script src="./_tts.js"></script>
<script src="./_audio.js"></script>
<script>
const SHAPES = [
  {name:'circle', color:'#e74c3c', cardColor:'#fff0e6', render: (s)=>{ const d=document.createElement('div'); d.style.width='18vw'; d.style.height='18vw'; d.style.borderRadius='50%'; d.style.background=s.color; d.style.border='3px solid rgba(0,0,0,0.2)'; d.style.boxShadow='0 4px 8px rgba(0,0,0,0.2)'; return d; }},
  {name:'square', color:'#3498db', cardColor:'#fffde7', render: (s)=>{ const d=document.createElement('div'); d.style.width='18vw'; d.style.height='18vw'; d.style.background=s.color; d.style.border='3px solid rgba(0,0,0,0.2)'; d.style.boxShadow='0 4px 8px rgba(0,0,0,0.2)'; return d; }},
  {name:'triangle', color:'#27ae60', cardColor:'#e6ffe6', render: (s)=>{ const d=document.createElement('div'); d.style.width='0'; d.style.height='0'; d.style.borderLeft='7vw solid transparent'; d.style.borderRight='7vw solid transparent'; d.style.borderBottom='14vw solid '+s.color; return d; }},
  {name:'rhombus', color:'#e67e22', cardColor:'#fff3e0', render: (s)=>{ const d=document.createElement('div'); d.style.width='18vw'; d.style.height='18vw'; d.style.background=s.color; d.style.border='3px solid rgba(0,0,0,0.2)'; d.style.boxShadow='0 4px 8px rgba(0,0,0,0.2)'; d.style.clipPath='polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%)'; return d; }},
  {name:'parallelogram', color:'#f39c12', cardColor:'#fff8e1', render: (s)=>{ const d=document.createElement('div'); d.style.width='22vw'; d.style.height='14vw'; d.style.background=s.color; d.style.transform='skew(-20deg)'; d.style.border='3px solid rgba(0,0,0,0.2)'; d.style.boxShadow='0 44px 8px rgba(0,0,0,0.2)'; return d; }},
  {name:'pentagon', color:'#9b59b6', cardColor:'#f3e5f5', render: (s)=>{ const d=document.createElement('div'); d.style.width='18vw'; d.style.height='18vw'; d.style.background=s.color; d.style.border='3px solid rgba(0,0,0,0.2)'; d.style.boxShadow='0 4px 8px rgba(0,0,0,0.2)'; d.style.clipPath='polygon(50% 0%, 100% 38%, 82% 100%, 18% 100%, 0% 38%)'; return d; }},
];
let answer=null;
function pick(n, arr){ const copy=[...arr]; const out=[]; while(out.length<n && copy.length){ out.push(copy.splice(Math.random()*copy.length|0,1)[0]); } return out; }
function newRound(){ 
  const opts=pick(6, SHAPES); 
  answer=opts[Math.random()*opts.length|0]; 
  console.log('New Round. Answer is:', answer.name); 
  render(opts); 
  
  const speakBtn = document.getElementById('speak');
  speakBtn.classList.add('pulsating');
  window.LE_TTS.speak(answer.name, () => {
    speakBtn.classList.remove('pulsating');
  });
  fb(''); 
}

function fb(t, ok){ const el=document.getElementById('fb'); el.textContent=t; el.className='feedback ' + (ok===true? 'ok':'') + (ok===false? ' bad':''); }
function render(opts){ const wrap=document.getElementById('choices'); wrap.innerHTML=''; for(const s of opts){ console.log('Rendering button for:', s.name); const btn=document.createElement('button'); btn.className='card'; btn.setAttribute('aria-label', s.name); btn.style.backgroundColor = s.cardColor; btn.appendChild(s.render(s)); btn.onclick=()=>{ 
      console.log('Clicked:', s.name, 'Expected:', answer.name);
      const ok=s.name===answer.name; 
      if(ok){ window.LE_AUDIO?.playDing?.(); window.LE_TTS.speak('Yes, '+s.name+'!'); } else { window.LE_AUDIO?.playBuzz?.(); window.LE_TTS.speak('Try again'); } fb(ok? 'âœ”':'âœ–', ok); if(ok) setTimeout(newRound,800); }; wrap.appendChild(btn);} }
document.getElementById('speak').onclick=()=>{
  const speakBtn = document.getElementById('speak');
  speakBtn.classList.add('pulsating');
  window.LE_TTS.speak(answer.name, () => {
    speakBtn.classList.remove('pulsating');
  });
};
newRound();
</script>
</body>
</html>
