<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@700&display=swap" rel="stylesheet">
<title>Abecedario en Espa√±ol - Juego para peques</title>
<meta name="theme-color" content="#74d2ff">
<style>
  :root{
    --bg1:#c9f1ff;
    --bg2:#fce1ff;
    --card:#ffffffdd;
    --accent:#74d2ff;
    --text:#1b1b1b;
    --muted:#4b5563;
    --shadow:0 10px 30px rgba(0,0,0,.15);
    --radius:22px;
  }

  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    font-family: ui-rounded, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji","Segoe UI Emoji", "Segoe UI Symbol";
    color:var(--text);
    background: radial-gradient(1200px 1200px at 10% 10%, var(--bg1), transparent 70%),
                radial-gradient(1200px 1200px at 90% 90%, var(--bg2), transparent 70%),
                linear-gradient(180deg, #e8f7ff, #fff);
    display:flex;
    align-items:center;
    justify-content:center;
    padding: max(12px, env(safe-area-inset-top)) max(12px, env(safe-area-inset-right)) max(16px, env(safe-area-inset-bottom)) max(12px, env(safe-area-inset-left));
  }

  .wrap{
    width:min(900px, 96vw);
    max-width:900px;
    display:grid;
    grid-template-rows:auto 1fr auto;
    gap:16px;
  }

  header{
    text-align:center;
  }

  h1{
    margin:0 0 8px 0;
    font-family: 'Baloo 2', cursive;
    font-size: clamp(32px, 6vw, 52px);
    letter-spacing:.5px;
    color: #5D3A9B;
    text-shadow: 0 3px 5px rgba(0,0,0,0.1);
  }
  .subtitle{
    font-size:clamp(14px, 1.9vw, 18px);
    color:var(--muted);
    line-height:1.35;
  }

  .progress{
    margin-top:8px;
    font-weight:600;
    color:#0f172a;
    font-size:clamp(14px, 1.8vw, 18px);
  }

  .card{
    background: linear-gradient(165deg, #ffffff, #f0f5ff);
    border-radius:var(--radius);
    box-shadow: 0 12px 30px rgba(0,0,0,0.12);
    min-height: min(60vh, 520px);
    display:grid;
    grid-template-rows: 1fr auto;
    justify-items:center;
    align-content: start;
    padding-top: clamp(24px, 5vh, 50px);
    padding-bottom: clamp(16px, 3vw, 28px);
    padding-left: clamp(16px, 3vw, 28px);
    padding-right: clamp(16px, 3vw, 28px);
    position:relative;
    overflow:hidden;
    touch-action:manipulation;
    border: 2px solid #fff;
  }

  .bubble{
    position:absolute;
    width: 200%;
    height: 200%;
    background: radial-gradient(circle, var(--accent), transparent 60%);
    opacity: 0.2;
    filter: blur(20px);
    border-radius:50%;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    pointer-events:none;
  }

  .letter-display {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: clamp(10px, 3vw, 20px);
  }

  .emoji{
    font-size:clamp(90px, 15vw, 180px);
    line-height:1;
    transition: transform .3s ease;
    user-select:none;
    filter: drop-shadow(0 5px 10px rgba(0,0,0,0.1));
  }

  .letter{
    font-size:clamp(100px, 20vw, 220px);
    font-weight:900;
    line-height:.9;
    letter-spacing:2px;
    background: linear-gradient(180deg, #222, #555);
    -webkit-background-clip:text;
    background-clip:text;
    color:transparent;
    text-shadow: 0 8px 24px rgba(0,0,0,.08);
    user-select:none;
  }

  .word{
    font-size:clamp(24px, 4vw, 40px);
    font-weight:700;
    color:#1e293b;
    letter-spacing:.5px;
    user-select:none;
    background: #fff;
    padding: 8px 20px;
    border-radius: 99px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.08);
  }

  .hint{
    font-size:clamp(13px, 1.8vw, 16px);
    color:var(--muted);
    margin-top:12px;
    text-align:center;
  }

  .controls{
    display:flex;
    gap:14px;
    justify-content:center;
    align-items:center;
    flex-wrap:wrap;
  }

  .btn{
    -webkit-tap-highlight-color: transparent;
    appearance:none;
    border:none;
    background:white;
    color:#0f172a;
    border-radius:20px;
    padding:14px 18px;
    font-weight:700;
    font-size:clamp(16px, 2.4vw, 20px);
    box-shadow: var(--shadow);
    display:inline-flex;
    align-items:center;
    gap:10px;
    cursor:pointer;
    transition: transform .06s ease, box-shadow .2s ease, background .2s ease;
    min-width: min(44vw, 220px);
    justify-content:center;
  }
  .btn:active{ transform: scale(.98) translateY(1px) }
  .btn svg{ width:26px;height:26px }

  .btn-round{
    width: clamp(62px, 12vw, 84px);
    height: clamp(62px, 12vw, 84px);
    border-radius:50%;
    padding:0;
    min-width:auto;
    background:white;
  }

  .btn-accent{ background: var(--accent); color:#052c3e }
  .btn-ghost{ background: white }
  .btn-label{ display:none }

  .row{
    display:flex; gap:12px; align-items:center; justify-content:center; flex-wrap:wrap;
  }

  footer{
    text-align:center;
    color:var(--muted);
    font-size:clamp(12px, 1.7vw, 14px);
  }

  .overlay{
    position:fixed; inset:0;
    background: rgba(0,0,0,0.3);
    backdrop-filter: blur(4px);
    display:grid; place-items:center;
    padding:24px;
    z-index:10;
    animation: fadeIn .3s ease;
  }
  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }
  .panel{
    width:min(420px, 92vw);
    background: #ffffff;
    border-radius: 24px;
    box-shadow: 0 16px 40px rgba(0,0,0,0.2);
    padding: clamp(24px, 5vw, 40px);
    text-align:center;
    border: 1px solid rgba(0,0,0,0.05);
    transform: scale(0.95) translateY(10px);
    animation: popIn .3s ease forwards;
  }
  @keyframes popIn {
    to { transform: scale(1) translateY(0); }
  }
  .panel h1{
    margin:0 0 12px 0;
    font-size: clamp(26px, 5.5vw, 38px);
    color: #333;
    display:flex;
    align-items:center;
    justify-content:center;
    gap: 12px;
    text-shadow: none;
    font-family: 'Baloo 2', cursive;
  }
  .panel p{
    margin:0 0 24px;
    color: #555;
    font-size: clamp(16px, 2.8vw, 19px);
    line-height:1.6;
  }
  .badgeRow{
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 12px;
    margin: 24px 0;
    padding: 16px;
    background: #f7f7f7;
    border-radius: 16px;
  }
  .mini{
    background: #fff;
    border: 1px solid #eee;
    border-radius:12px;
    padding:10px 16px;
    box-shadow: 0 3px 6px rgba(0,0,0,.05);
    display:flex; align-items:center; gap:10px;
    font-weight:700;
    color:#444;
    font-size: clamp(13px, 2vw, 15px);
    transition: transform .2s ease;
  }
  .mini:hover{
    transform: translateY(-2px);
  }

  .kbd{
    font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
    background:#f3f4f6;border:1px solid #e5e7eb;border-bottom-width:2px;border-radius:6px;padding:2px 6px;display:inline-block;
  }

  @media (min-width:740px){
    .btn{ min-width: 180px }
    .btn-label{ display:inline }
  }

  @media (prefers-reduced-motion:no-preference){
    .pop{ animation:pop .35s cubic-bezier(.2,1.2,.2,1) }
    @keyframes pop{ 0%{transform:scale(.85)} 70%{transform:scale(1.04)} 100%{transform:scale(1)} }
  }
</style>
</head>
<body>
<div class="wrap" id="app">
  <header>
    <h1>Abecedario Espa√±ol</h1>
    <div class="subtitle">Toca los botones o desliza a los lados. Usa las flechas del teclado (‚Üê ‚Üí) o pulsa el altavoz para escuchar.</div>
    <div class="progress" id="progress">1/27</div>
  </header>

  <main class="card" id="card" aria-live="polite">
    <div class="bubble"></div>
    <div class="letter-display">
      <div class="letter pop" id="letter" aria-label="letra">A</div>
      <div class="emoji pop" id="emoji" role="img" aria-label="imagen">üåü</div>
    </div>
    <div>
      <div class="word pop" id="word">avi√≥n</div>
      <div class="hint">Pulsa la tarjeta para escuchar de nuevo</div>
    </div>
  </main>

  <div class="controls">
    <div class="row">
      <button class="btn btn-round btn-ghost" id="prevBtn" aria-label="Anterior">
        <svg viewBox="0 0 24 24" fill="none" stroke="#0f172a" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <path d="M15 18l-6-6 6-6"/>
        </svg>
      </button>

      <button class="btn btn-round btn-accent" id="speakBtn" aria-label="Escuchar">
        <svg viewBox="0 0 24 24" fill="none" stroke="#052c3e" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <path d="M11 5l-4 4H4v6h3l4 4V5z"/>
          <path d="M15.54 8.46a5 5 0 010 7.07M19.07 4.93a10 10 0 010 14.14"/>
        </svg>
      </button>

      <button class="btn btn-round btn-ghost" id="nextBtn" aria-label="Siguiente">
        <svg viewBox="0 0 24 24" fill="none" stroke="#0f172a" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <path d="M9 18l6-6-6-6"/>
        </svg>
      </button>
    </div>
  </div>

  <footer>
    Consejos: deslice a la izquierda/derecha para cambiar. Teclas r√°pidas: <span class="kbd">‚Üê</span> <span class="kbd">‚Üí</span> para anterior/siguiente, <span class="kbd">Espacio</span>/<span class="kbd">Enter</span> para escuchar.
  </footer>

  <div class="overlay" id="overlay" role="dialog" aria-modal="true" aria-labelledby="startTitle">
    <div class="panel">
      <h1 id="startTitle"><span aria-hidden="true">üí°</span> ¬øC√≥mo Jugar?</h1>
      <p>Aprende el abecedario en espa√±ol escuchando las letras y viendo las im√°genes.</p>
      <div class="badgeRow">
        <div class="mini">üëÜ Toca la tarjeta</div>
        <div class="mini">‚ÜîÔ∏è Desliza</div>
        <div class="mini">‚å®Ô∏è Usa ‚Üê y ‚Üí</div>
      </div>
      <div style="display: flex; justify-content: center; margin-top: 28px;">
        <button id="startBtn" class="btn round" style="font-size: clamp(18px, 3.5vw, 24px); padding: 16px 28px; box-shadow: 0 8px 20px rgba(108,92,231,.4); background: var(--accent); color: #fff;"><span aria-hidden="true">‚ñ∂Ô∏è</span> ¬°Vamos!</button>
      </div>
    </div>
  </div>
</div>

<script>
(function(){
  const data = [
    { letter:'A', name:'a', word:'avi√≥n', emoji:'‚úàÔ∏è', color:'#FF6B6B' },
    { letter:'B', name:'be', word:'barco', emoji:'üö¢', color:'#4D96FF' },
    { letter:'C', name:'ce', word:'casa', emoji:'üè†', color:'#6BCB77' },
    { letter:'D', name:'de', word:'delf√≠n', emoji:'üê¨', color:'#38A3A5' },
    { letter:'E', name:'e', word:'estrella', emoji:'‚≠ê', color:'#F9C74F' },
    { letter:'F', name:'efe', word:'flor', emoji:'üå∏', color:'#FF9FF3' },
    { letter:'G', name:'ge', word:'gato', emoji:'üê±', color:'#F94144' },
    { letter:'H', name:'hache', word:'helado', emoji:'üç¶', color:'#90CAF9' },
    { letter:'I', name:'i', word:'isla', emoji:'üèùÔ∏è', color:'#43AA8B' },
    { letter:'J', name:'jota', word:'jirafa', emoji:'ü¶í', color:'#F8961E' },
    { letter:'K', name:'ka', word:'koala', emoji:'üê®', color:'#9FA8DA' },
    { letter:'L', name:'ele', word:'luna', emoji:'üåô', color:'#A0C4FF' },
    { letter:'M', name:'eme', word:'mariposa', emoji:'ü¶ã', color:'#FFAFCC' },
    { letter:'N', name:'ene', word:'nube', emoji:'‚òÅÔ∏è', color:'#8ECAE6' },
    { letter:'√ë', name:'e√±e', word:'ni√±a', emoji:'üëß', color:'#E5989B' },
    { letter:'O', name:'o', word:'oso', emoji:'üêª', color:'#F9844A' },
    { letter:'P', name:'pe', word:'perro', emoji:'üê∂', color:'#BDB2FF' },
    { letter:'Q', name:'cu', word:'queso', emoji:'üßÄ', color:'#FFD166' },
    { letter:'R', name:'erre', word:'rana', emoji:'üê∏', color:'#95D5B2' },
    { letter:'S', name:'ese', word:'sol', emoji:'‚òÄÔ∏è', color:'#F4D35E' },
    { letter:'T', name:'te', word:'tren', emoji:'üöÜ', color:'#6FFFE9' },
    { letter:'U', name:'u', word:'uva', emoji:'üçá', color:'#9B5DE5' },
    { letter:'V', name:'uve', word:'vaca', emoji:'üêÆ', color:'#80FFDB' },
    { letter:'W', name:'uve doble', word:'wifi', emoji:'üì∂', color:'#48CAE4' },
    { letter:'X', name:'equis', word:'xil√≥fono', emoji:'üéµ', color:'#B8F2E6' },
    { letter:'Y', name:'ye', word:'yoyo', emoji:'ü™Ä', color:'#F15BB5' },
    { letter:'Z', name:'zeta', word:'zorro', emoji:'ü¶ä', color:'#FFAD69' },
  ];

  const emojiEl = document.getElementById('emoji');
  const letterEl = document.getElementById('letter');
  const wordEl = document.getElementById('word');
  const progressEl = document.getElementById('progress');
  const cardEl = document.getElementById('card');
  const prevBtn = document.getElementById('prevBtn');
  const nextBtn = document.getElementById('nextBtn');
  const speakBtn = document.getElementById('speakBtn');
  const overlay = document.getElementById('overlay');
  const startBtn = document.getElementById('startBtn');

  let idx = parseInt(localStorage.getItem('es_alpha_idx') || '0',10);
  let started = false;

  function setAccent(color){
    document.documentElement.style.setProperty('--accent', color || '#74d2ff');
    const metaTheme = document.querySelector('meta[name="theme-color"]');
    if(metaTheme) metaTheme.setAttribute('content', color || '#74d2ff');
  }

  function render(){
    const item = data[idx];
    setAccent(item.color);
    emojiEl.textContent = item.emoji;
    letterEl.textContent = item.letter;
    wordEl.textContent = item.word;
    progressEl.textContent = `${idx+1}/${data.length}`;

    emojiEl.classList.remove('pop'); letterEl.classList.remove('pop'); wordEl.classList.remove('pop');
    requestAnimationFrame(()=> {
      emojiEl.classList.add('pop'); letterEl.classList.add('pop'); wordEl.classList.add('pop');
    });

    localStorage.setItem('es_alpha_idx', String(idx));
    if(started) speakCurrent();
  }

  // Speech
  let voice = null;
  let voicesLoaded = false;

  function pickSpanishVoice(){
    const voices = window.speechSynthesis ? speechSynthesis.getVoices() : [];
    if(!voices.length) return null;
    const esVoices = voices.filter(v => (v.lang||'').toLowerCase().startsWith('es'));
    // Prefer es-ES or es-MX in that order
    const preferred = esVoices.find(v=>/es-ES/i.test(v.lang)) || esVoices.find(v=>/es-MX/i.test(v.lang));
    return preferred || esVoices[0] || voices[0];
  }

  function speak(text){
    if(!('speechSynthesis' in window)) return;
    try{ speechSynthesis.cancel(); }catch(e){}
    const u = new SpeechSynthesisUtterance(text);
    voice = voice || pickSpanishVoice();
    if(voice) u.voice = voice;
    u.lang = (voice && voice.lang) || 'es-ES';
    u.rate = 0.9;
    u.pitch = 1.05;
    u.volume = 1;
    try{ speechSynthesis.speak(u); }catch(e){}
  }

  function speakCurrent(){
    const item = data[idx];
    const phrase = `${item.name}. ${item.word}.`;
    speak(phrase);
    vibrate(8);
  }

  if('speechSynthesis' in window){
    const loadVoices = ()=>{
      voicesLoaded = true;
      voice = pickSpanishVoice();
    };
    speechSynthesis.onvoiceschanged = loadVoices;
    // Try once in case already loaded
    setTimeout(loadVoices, 200);
  }

  // Controls
  function next(){
    idx = (idx + 1 + data.length) % data.length;
    render();
  }
  function prev(){
    idx = (idx - 1 + data.length) % data.length;
    render();
  }

  function vibrate(ms){
    if(navigator.vibrate) navigator.vibrate(ms);
  }

  // Touch swipe
  let touchX = null, touchY = null, touchTime = 0;
  const SWIPE_THRESH = 40;

  function onTouchStart(e){
    const t = e.changedTouches[0];
    touchX = t.clientX; touchY = t.clientY; touchTime = Date.now();
  }
  function onTouchEnd(e){
    if(touchX===null) return;
    const t = e.changedTouches[0];
    const dx = t.clientX - touchX;
    const dy = t.clientY - touchY;
    const dt = Date.now()-touchTime;
    if(Math.abs(dx) > Math.abs(dy) && Math.abs(dx) > SWIPE_THRESH && dt < 600){
      if(dx < 0) next(); else prev();
    }else{
      // Tap to speak
      if(Math.hypot(dx,dy) < 10 && dt < 300){
        speakCurrent();
      }
    }
    touchX = touchY = null; touchTime = 0;
  }

  // Event bindings
  prevBtn.addEventListener('click', ()=>{ prev(); });
  nextBtn.addEventListener('click', ()=>{ next(); });
  speakBtn.addEventListener('click', ()=>{ speakCurrent(); });
  cardEl.addEventListener('touchstart', onTouchStart, {passive:true});
  cardEl.addEventListener('touchend', onTouchEnd);

  cardEl.addEventListener('click', (e)=>{
    if(e.target.closest('button')) return;
    speakCurrent();
  });

  window.addEventListener('keydown', (e)=>{
    if(e.key === 'ArrowRight'){ e.preventDefault(); next(); }
    else if(e.key === 'ArrowLeft'){ e.preventDefault(); prev(); }
    else if(e.key === ' ' || e.key === 'Enter'){ e.preventDefault(); speakCurrent(); }
  });

  // Start overlay
  startBtn.addEventListener('click', ()=>{
    started = true;
    overlay.style.display = 'none';
    // small delay to ensure iOS audio allows speaking
    setTimeout(()=>{ render(); }, 60);
  });

  // Initialize UI
  render();

})();
</script>
</body>
</html>